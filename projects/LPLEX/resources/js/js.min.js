if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Core=(function(){(function(){})();return{EditorVersion:null,Language:null,TextTypeMapping:null,FallBackTextTypeMapping:null,IsRtl:null,AddEmptyLastModule:false,Setup:function(b,e,d,a,c){this.EditorVersion=b;this.Language=e;this.TextTypeMapping=d;this.FallBackTextTypeMapping=a;this.IsRtl=c}}})();
LOUISE.Core.Events=(function(){var a={};return{Register:function(b,c){if(!a[c]){a[c]={ownedBy:b,callbacks:[]}}},Add:function(b,c){if(!b){throw new Error("Parameter 'eventName' is not valid")}if(!a[b]){throw new Error('The event name "'+b+'" is not registered')}a[b].callbacks.push(c)},Remove:function(b,e){var d=a[b].callbacks;for(var c=0;c<d.length;c++){if(d[c]===e){d.splice(c,1);return}}},Execute:function(b,c,g){if(!a[c]){throw new Error('The event name "'+c+'" is not registered')}if(a[c].ownedBy!==b){throw Error("The event caller doesn't match the registered event owner")}g=[].concat(g);var f=a[c].callbacks;for(var d=0;d<f.length;d++){f[d].apply(b,g)}}}})();
LOUISE.Core.CBTItem=(function(){(function(){})();return{Testype:{none:0,exercise:1,test:2},GetProperty:function(a,e){if(e.Properties===undefined){return undefined}var b=a.toString().toLowerCase();var c;c=e.Properties[b];if(c===undefined){var d=e.GetParent();while(d&&d.CBTItemType!="course"){d=d.GetParent()}if(d){c=d.Properties[b]}}return c},SetProperty:function(a,c,d){if(d.Properties===undefined){return}var b=a.toString().toLowerCase();d.Properties[b]=c},GetCourseParent:function(b){var a=b.GetParent();while(a){if(a.CBTItemType==="course"){return a}a=a.GetParent()}return undefined},GetHeaderParent:function(b){var a=b.GetParent();while(a){if(a.CBTItemType==="header"){return a}a=a.GetParent()}return undefined},ParsePorperties:function(a){if(!a){return{}}var c=a.substring(1,a.length-1);c=c.toLowerCase();var d=c.split(",");var b={};$.each(d,function(h){var g=d[h].split(":");var j=g[0].replace(/\s/g,"");j=j.substring(1,j.length);var l=$.trim(g[1]).toString().replace(/^(')(.*)(')$/,"$2");var f=l.indexOf("|")!=-1;if(f){var k=l.split("|");var e=[];for(var h=0;h<k.length;h++){k[h]=k[h].replace(/^\s*/,"").replace(/\s*$/,"");if(k[h].length>0){e.push(k[h])}}b[j]=e}else{b[j]=l}});if(b.guimode){if(b.guimode.toLowerCase()=="no gui"){b.guimode="fullscreen"}}return b}}})();
LOUISE.Core.CBTItem.Course=function(a){var c={Count:function(){return this.Items.length},Add:function(f){this.Items.push(f)},Clear:function(){this.Items=[]},GetAt:function(f){if(f===undefined||f===null||f<0||f>=this.Items.length){return null}return this.Items[f]},Items:[]};var b=0;var d=null;var e=false;this.CBTItemType="course";this.Children=c;this.Label="";this.Description="";this.ID=null;this.Index=null;this.Position=0;this.UID="";this.Properties={};this.Depth=0;this.GetProperty=function(f){return LOUISE.Core.CBTItem.GetProperty(f,this)};this.SetProperty=function(f,g){LOUISE.Core.CBTItem.SetProperty(f,g,this)};this.Progress=function(){if(b==1){return 1}var h=0;var f=this.Children.Count();for(var g=0;g<f;g++){var j=this.Children.GetAt(g);if(j.CBTItemType=="module"){h+=j.Progress()}if(j.CBTItemType=="header"&&j.Progress()){h+=j.Progress()}}b=h/f;return Math.min(b,1)};this.IsDone=function(){if(e){return true}e=this.Progress()==1;return e};this.GetParent=function(){return d};this.SetParent=function(f){d=f};this.GetCourseParent=function(){return LOUISE.Core.CBTItem.GetCourseParent(this)};this.GetHeaderParent=function(){return LOUISE.Core.CBTItem.GetHeaderParent(this)};if(a!==undefined){this.Label=$(a).attr("label");this.ID=parseInt($(a).attr("ID"));this.UID=$(a).attr("UID");this.Properties=LOUISE.Core.CBTItem.ParsePorperties($(a).attr("properties"))}};
LOUISE.Core.CBTItem.Header=function(c){var b={Count:function(){return this.Items.length},Add:function(f){this.Items.push(f)},Clear:function(){this.Items=[]},GetAt:function(f){if(f===undefined||f===null||f<0||f>=this.Items.length){return null}return this.Items[f]},Items:[]};var a=0;var d=null;var e=false;this.CBTItemType="header";this.Children=b;this.Label="";this.Description="";this.ID=null;this.Index=null;this.Position=0;this.UID="";this.Depth=0;this.Progress=function(){if(a==1){return 1}var h=0;var f=this.Children.Count();for(var g=0;g<f;g++){var j=this.Children.GetAt(g);if(j.CBTItemType=="module"){h+=j.Progress()}}a=h/f;return a};this.IsDone=function(){if(e){return true}e=this.Progress()==1;return e};this.GetParent=function(){return d};this.SetParent=function(f){d=f};this.GetCourseParent=function(){return LOUISE.Core.CBTItem.GetCourseParent(this)};this.GetHeaderParent=function(){return LOUISE.Core.CBTItem.GetHeaderParent(this)};if(c===undefined){return this}this.Label=$(c).attr("label");this.ID=parseInt($(c).attr("ID"));this.UID=$(c).attr("UID")};
LOUISE.Core.CBTItem.Module=function(c){var e=null;var f=false;function a(g){return g.substring(g.lastIndexOf(".")+1,g.length).toLowerCase()}this.CBTItemType="module";this.ProjectContentPath="content/";this.Source="";this.Description="";this.ID=null;this.Index=null;this.Position=0;this.ViewIndex=null;this.UID="";this.Properties={};this.Type="";this.VisitedPages=null;this.Depth=0;this.TestData={type:LOUISE.Core.CBTItem.Testype.none,score:0,max:0,passed:false};this.GetProperty=function(g){return LOUISE.Core.CBTItem.GetProperty(g,this)};this.SetProperty=function(g,h){LOUISE.Core.CBTItem.SetProperty(g,h,this)};this.Progress=function(){if(this.done||parseInt(this.GetProperty("hidden"),10)==1||this.ID==-1){return 1}if(!this.VisitedPages){return 0}var j=0;var k=this.VisitedPages.length;for(var g=0;g<this.VisitedPages.length;g++){if(this.VisitedPages[g]==1){j++}}var h=j/k;this.done=h==1;return h};this.IsDone=function(){if(f){return true}f=this.Progress()==1;return f};this.GetParent=function(){return e};this.SetParent=function(g){e=g};this.GetCourseParent=function(){return LOUISE.Core.CBTItem.GetCourseParent(this)};this.GetHeaderParent=function(){return LOUISE.Core.CBTItem.GetHeaderParent(this)};if(c===undefined){return this}var d=$(c).attr("project");if(d){var b=d.lastIndexOf("/")==d.length-1?"":"/";this.ProjectContentPath=d+b+"content/"}this.Source=$(c).attr("source");this.ID=parseInt($(c).attr("ID"));this.UID=$(c).attr("UID");this.Properties=LOUISE.Core.CBTItem.ParsePorperties($(c).attr("properties"));this.Type=a(this.Source)};
LOUISE.Core.CBTTree=(function(){var e=null;var c={};var a=true;var d="f04d4c1d-9b48-4342-ac33-9f0fcf28d948";var b=Math.random()+""+Math.random();(function(){LOUISE.Core.Events.Register(b,d)})();function i(){LOUISE.Core.Events.Execute(b,d)}function f(l){if(!l.Children){return}for(var k=0;k<l.Children.Count();k++){var j=l.Children.GetAt(k);if(j.CBTItemType==="module"){e.push(j)}if(j.Children&&j.Children.Count()>0){f(j)}}}function h(k,o){var q;switch(k.CBTItemType){case"module":q=LOUISE.Core.CBTTree.GetAllModules();break;case"course":q=LOUISE.Core.CBTTree.Courses.Items;break;default:return false}var j=1*o;var l=q[k.Index+j];while(l){var n=k.GetCourseParent()==l.GetCourseParent();var m=!l.GetProperty;var p=l.GetProperty("hidden")!=1;if(n&&(m||p)){return false}j+=1*o;l=q[k.Index+j]}return true}function g(u,m){if(m.length<1){c={};LOUISE.Core.CBTTree.CurrentFilter=[];a=true}var v=false;for(var r=0;r<u.length;r++){var w=false;var x=u[r];var o=x.GetProperty("filter");if(o.length>0&&c[x.UID]!=1){x.SetProperty("hidden","1")}else{continue}for(var q=0;q<m.length;q++){for(var p=0;p<o.length;p++){if((m[q].toLowerCase()==o[p].toLowerCase())){x.SetProperty("hidden","0");c[x.UID]=1;w=true;v=true}}}if(!w){c[x.UID]=0}}if(v){a=false}var n=LOUISE.Core.CBTTree.GetAllModules();var t=0;for(var r=0;r<n.length;r++){var s=n[r];var l=s.GetProperty("hidden");if(l&&parseInt(l,10)!==1){s.ViewIndex=t++}}}return{ON_CBT_TREE_FILTERED:d,CBTTitle:"",Root:{},CurrentFilter:[],GetAllModules:function(){if(e){return e}e=[];f(this.Root);return e},IsFirstVisible:function(j){return h(j,-1)},IsLastVisible:function(j){return h(j,1)},SetFilter:function(m){m=m.toString().toLowerCase()=="null"?[]:m;for(var l=0;l<m.length;l++){var n=false;for(var k=0;k<this.CurrentFilter.length;k++){if(this.CurrentFilter[k].toLowerCase()==m[l].toLowerCase()){n=true;break}}if(!n){this.CurrentFilter.push(m[l])}}g(LOUISE.Core.CBTTree.Courses.Items.concat(LOUISE.Core.CBTTree.Modules.Items),m);i()}}})();
LOUISE.Core.CBTTree.Courses=(function(){(function(){})();return{Items:[],Count:function(d){var e=this.Items.length;var a=0;if(d){var b;for(var c=0;c<e;c++){b=this.Items[c];if(parseInt(b.GetProperty("hidden"),10)==1){a++}}}return e-a},Add:function(a){this.Items.push(a)},Clear:function(){this.Items=[]},GetAt:function(a){if(a===undefined||a===null||a<0||a>=this.Items.length){return null}return this.Items[a]}}})();
LOUISE.Core.CBTTree.Headers=(function(){(function(){})();return{Items:[],Count:function(){return this.Items.length},Add:function(a){this.Items.push(a)},Clear:function(){this.Items=[]},GetAt:function(a){if(a===undefined||a===null||a<0||a>=this.Items.length){return null}return this.Items[a]}}})();
LOUISE.Core.CBTTree.Modules=(function(){(function(){})();return{Items:[],Count:function(a){var e=this.Items.length;var b=0;if(a){var d;for(var c=0;c<e;c++){d=this.Items[c];if(parseInt(d.GetProperty("hidden"),10)==1||d.ID=="-1"){b++}}}return e-b},Add:function(a){this.Items.push(a)},Clear:function(){this.Items=[]},GetAt:function(a){if(a===undefined||a===null||a<0||a>=this.Items.length){return null}return this.Items[a]}}})();
LOUISE.Core.Text=(function(){var a="";(function(){})();function b(m,h,e,d,n){var k=n||$("#panel_content_text");var c=k;var g=c.find(".inner_text_container");if(!e||!g.length){g=$("<div></div>").attr("class","inner_text_container")}if(!e){c.html("")}var j;var l=$("#"+m+"_"+(h+1));var i=d?l.text():l.html();j=d?"<span>"+i+"</span>":i;var f=g.text().length>0?'<div class="text-type-divider">'+l.attr("data-alias")+"</div>":"";if(i){j=e?g.html()+f+j:j;g.html(j)}LOUISE.Core.Text.SwapTextAlign(g);c.append(g);c.scrollTop(0)}return{HasText:false,HasTitle:false,TypeMapping:null,Pages:0,LinkColor:"#7FA4C5",LinkDecoration:"none",TextInImages:[],LoadModuleFile:function(e,f,g){a=f||a;if(a===""){throw new Error("XSL file path not valid")}var d=LOUISE.Core.XML.Slide.GetXMLPath(e);if(d===""){LOUISE.Core.Text.TextInImages=[];$("#module_texts").html("");LOUISE.Core.Text.HasText=false;LOUISE.Core.Text.HasTitle=false;return}if($("#module_texts").length<1){$("body").append('<div id="module_texts"></div>');$("#module_texts").hide(0)}$("#module_texts").html("");LOUISE.Core.Text.TypeMapping=g||LOUISE.Core.TextTypeMapping;var c=LOUISE.Core.XML.Slide.TransformXML(e,a);if(c){c=c.replace(/^ +/gm,"");c=c.replace(/\r?\n|\r/g,"");$("#module_texts").html(c)}LOUISE.Core.Text.HasText=$.trim($("#"+LOUISE.Core.Text.TypeMapping.PrimaryScreenText+"_1").text()).length>0;LOUISE.Core.Text.HasTitle=$.trim($("#"+LOUISE.Core.Text.TypeMapping.Student_1+"_1").text()).length>0;if(!c&&LOUISE.Core.FallBackTextTypeMapping&&!g){this.LoadModuleFile(e,a,LOUISE.Core.FallBackTextTypeMapping);return}LOUISE.Core.Text.Pages=$('#module_texts > [id^="'+LOUISE.Core.Text.TypeMapping.PrimaryScreenText+'"]').length-1;LOUISE.Core.Text.CreateTextInImages(LOUISE.Core.XML.LoadFile(d))},ToPage:function(c,d,f,e){var g=d||LOUISE.Core.Text.TypeMapping.PrimaryScreenText;b(g,c,false,f,e)},AddToPage:function(c,d,f,e){var g=d||LOUISE.Core.Text.TypeMapping.Student_2;b(g,c,true,f,e)},ToDrilldown:function(c){b(LOUISE.Core.Text.TypeMapping.Student_3,c)},SwapTextAlign:function(c){if(LOUISE.Core.IsRtl){c.find("*").each(function(){var e=$(this);if(e[0].nodeName.toLowerCase()=="br"){e.css("direction","ltr");return true}var d=e.css("text-align");if(d=="left"){e.css("text-align","right")}else{if(d=="right"){e.css("text-align","left")}}});c.find("span, li").addClass("rtl");c.addClass("rtl")}},CreateTextInImages:function(c){LOUISE.Core.Text.TextInImages=[];$("txtInImg",c).each(function(){var e=new LOUISE.Core.Text.TextInImage();var g=$(this).text().split(",");e.Instance=parseInt($(this).attr("instance"),10);e.Top=parseInt(g[1],10);e.Left=parseInt(g[0],10);e.Width=parseInt(g[2],10);e.Height=parseInt(g[3],10);e.Page=parseInt($(this).attr("page"),10);var d=$('chunk[textType="txtInImg"][instance="'+e.Instance+'"]',c);e.Valign=d.attr("vAlign");var f=parseInt(d.attr("useTxtInImgNo"),10);f=isNaN(f)?e.Instance:f;e.Html=$("#txtInImg_"+f).html();if(!LOUISE.Core.Text.TextInImages[e.Page-1]){LOUISE.Core.Text.TextInImages[e.Page-1]=[]}LOUISE.Core.Text.TextInImages[e.Page-1].push(e)})}}})();
LOUISE.Core.Text.TextInImage=function(){this.Instance=0;this.Top=0;this.Left=0;this.Width=0;this.Height=0;this.Page=0;this.Align="";this.Valign="";this.Html=null};
LOUISE.Core.XML=(function(){(function(){})();return{LoadFile:function(e){var b;var d;if(window.XMLHttpRequest&&!window.ActiveXObject){b=new XMLHttpRequest()}else{b=new ActiveXObject("Microsoft.XMLHTTP")}try{b.open("GET",e,false);b.send();d=b.responseXML;if(!d||!d.documentElement){var c=b.responseText;d=new ActiveXObject("Microsoft.XMLDOM");d.async=false;d.loadXML(c)}return d}catch(a){return null}}}})();
LOUISE.Core.XML.CBT=(function(){var l=null;var c=0;var e=0;var g=0;var h=null;var j=0;var b=[];(function(){})();function a(s,u,r,p){var t=new LOUISE.Core.CBTItem.Course(s);t.Index=r;t.SetParent(u);t.Position=u.Children.Count();t.Description=i(t.ID,l);t.Depth=p;var o=f(t.GetProperty("filter"),t.Label);t.Label=o.description;t.SetProperty("filter",o.filter);LOUISE.Core.CBTTree.Courses.Add(t);var n=s.children();for(var q=0;q<n.length;q++){var m=n[q].nodeName.toLowerCase();if(m==="module"){d($(n[q]),t,c++,p+1)}else{if(m==="header"){k($(n[q]),t,e++,p+1)}else{a($(n[q]),t,g++,p+1)}}}u.Children.Add(t)}function d(n,m,o,r){var q=new LOUISE.Core.CBTItem.Module(n);q.Index=o;q.Position=m.Children.Count();q.SetParent(m);q.ViewIndex=null;q.Depth=r;var s=q.GetProperty("guimode").toLowerCase();if(s=="self test"){q.TestData.type=LOUISE.Core.CBTItem.Testype.test}else{if(s=="exercise"){q.TestData.type=LOUISE.Core.CBTItem.Testype.exercise}else{q.TestData.type=LOUISE.Core.CBTItem.Testype.none}}q.Description=i(q.ID,l);var p=f(q.GetProperty("filter"),q.Description);if(p.filter.length>0){q.Description=p.description;q.SetProperty("filter",p.filter)}if(b.length>0){q.SetProperty("filter",b)}if(parseInt(q.GetProperty("hidden"),10)!==1){q.ViewIndex=j++}LOUISE.Core.CBTTree.Modules.Add(q);m.Children.Add(q)}function k(t,u,q,r){var o=new LOUISE.Core.CBTItem.Header(t);o.Index=q;o.Position=u.Children.Count();o.SetParent(u);o.Depth=r;o.Description=i(o.ID,l);var p=f(null,o.Label);o.Label=p.description;b=p.filter;LOUISE.Core.CBTTree.Headers.Add(o);var n=t.children();for(var s=0;s<n.length;s++){var m=n[s].nodeName.toLowerCase();if(m==="module"){d($(n[s]),o,c++,r+1)}else{if(m==="header"){k($(n[s]),o,e++,r+1)}else{a($(n[s]),o,g++,r+1)}}}u.Children.Add(o);b=[]}function i(n,o){var m=$("description[instance="+n+"]",o).text();m=m.replace(/</g,"&lt;");m=m.replace(/>/g,"&gt;");m=m.replace(/\"/g,"&quot;");m=$.trim(m)===""?"Untitled":m;return m}function f(n,t){var s=[];if(typeof n==="object"){s=n}var m=t.indexOf("[@:");if(m==-1){return{description:t,filter:s||[]}}var r=t.substring(m+3,t.indexOf("]",m));var q=t.substring(0,m);var p=r.split(",");for(var o=0;o<p.length;o++){p[o]=p[o].replace(/ /g,"")}return{description:q,filter:s.concat(p)}}return{ParseTree:function(o,t){l=o;c=0;e=0;g=-1;LOUISE.Core.CBTTree.Root=new LOUISE.Core.CBTItem.Course();LOUISE.Core.CBTTree.Root.Index=g++;h=LOUISE.Core.CBTTree.Root;var r=$(o).find("cbtTree").children();for(var q=0;q<r.length;q++){var p=r[q].nodeName.toLowerCase();if(p=="course"){a($(r[q]),LOUISE.Core.CBTTree.Root,g++,0)}else{if(p=="header"){k($(r[q]),LOUISE.Core.CBTTree.Root,e++,0)}}}var m=0;var n=LOUISE.Core.CBTTree.Courses.GetAt(m);while(!LOUISE.Core.CBTTree.IsLastVisible(n)){n=LOUISE.Core.CBTTree.Courses.GetAt(++m)}if(LOUISE.Core.AddEmptyLastModule){var v='<course ID="-1" label="End" icon="courseIcon" ';v+="properties=\"[#slideShow: 0, #repeat: 0, #fullScreen: 0, #printing: 1, #pageBreakInternal: 0, #hidden: 0, #guiMode: 'Textplate', #stretch: 1, #autoStartSWF: 0, ";v+="#autoStartFLV: 1, #allowNavNext: 1, #allowNavPrev: 1, #slideTime: 5, #EstTime: 120, #isAnimation: 0, #isVideo: 0, #isKnowledgeTest: 0, #bgColor: FFFFFF, ";v+="#FLVbgColor: 000000, #FLVmax: 1, #actionAfterVideo: Next, #FLVplayer: , #iconLogoActive: 0, #iconLogoFile: , #iconLogoAlign: right, #autoHeadline: 0, ";v+="#aH_fontFamily: Arial, #aH_fontSize: 32, #aH_fontStyle: normal, #aH_fontWeight: bold, #aH_textDecoration: normal, #aH_textTransform: normal, #aH_align: center, ";v+='#aH_color: 000000, #aH_src: 0, #welcomeImg: 0, #welcomeBg: 0, #welcomeWide: 0, #welcomeScale: 0, #txtInImgVisible: 1]" UID="11111111-1111-1111-1111-111111111111">';v+="</course>";a($(v),LOUISE.Core.CBTTree.Root,g++,0);var u=LOUISE.Core.CBTTree.Courses.GetAt(LOUISE.Core.CBTTree.Courses.Count()-1);var s='<module ID="-1" icon="moduleIcon" source="000.end" UID="00000000-0000-0000-0000-000000000000"></module>';d(s,u,c++,0)}LOUISE.Core.CBTTree.CBTTitle=$("name",o).text();LOUISE.Core.CBTTree.SetFilter([]);if(t){t()}}}})();
LOUISE.Core.XML.Slide=(function(){(function(){})();function b(f,g){if(!f){return}var d=f.xml;if(typeof(d)!="string"){d=(new XMLSerializer()).serializeToString(f)}for(var e=0;e<g.length;e++){d=c(d,g[e])}d=a(d);if(d===""){return f}return $.parseXML(d)}function a(d){if(!d){return d}if(d.indexOf("[@:")==-1){return d}d=d.replace(/\[(@:).+?\]/gi,"");return d}function c(d,f){if(!d){return d}if(d.indexOf("[#var:")==-1){return d}var e=LOUISE.Core.XML.LoadFile(f);$("variable",e).each(function(h){var g=$(this);var j=g.text();j=j.replace(/&/g,"&amp;");j=j.replace(/</g,"&lt;");j=j.replace(/>/g,"&gt;");j=j.replace(/\"/g,"&quot;");j=j.replace(/\'/g,"&apos;");j=j.replace(/\r?\n|\r/g,"<br/>");var k=new RegExp("(\\[#var:"+g.attr("vName")+"])","g");d=d.replace(k,j)});return d}return{GetXMLPath:function(e){if(e.Type=="end"){return""}var d=e.Source;d=d.substring(0,d.lastIndexOf("."));d=e.ProjectContentPath+"text/"+LOUISE.Core.Language+"/"+d+"_"+LOUISE.Core.Language+".xml";return d},TransformXML:function(f,h){xmlFile=LOUISE.Core.XML.Slide.GetXMLPath(f);var g=LOUISE.Core.XML.LoadFile(xmlFile,true);var j=LOUISE.Core.XML.LoadFile(h);if(!g){return null}if(!j){throw new Error("XSL file loading failed")}var i=[];i.push(f.ProjectContentPath+"text/"+LOUISE.Core.Language+"/variables.xml");i.push(f.ProjectContentPath+"text/"+LOUISE.Core.Language+"/L2_vars_"+LOUISE.Core.Language+".xml");g=b(g,i);var e;if(window.ActiveXObject){e=g.transformNode(j);e=e.replace(/(<\/.+?>) (<.+?>)/gi,"$1$2");return LOUISE.Core.EditorVersion<3?LOUISE.Core.XML.Slide.HTMLV2X.Create(e):LOUISE.Core.XML.Slide.HTMLV3.Create(e)}else{if(document.implementation&&document.implementation.createDocument){var d;d=new XSLTProcessor();d.importStylesheet(j);e=d.transformToFragment(g,document);return LOUISE.Core.EditorVersion<3?LOUISE.Core.XML.Slide.HTMLV2X.Create(e):LOUISE.Core.XML.Slide.HTMLV3.Create(e)}}}}})();
LOUISE.Core.XML.Slide.HTMLV2X=(function(){(function(){})();return{Create:function(b){var c=$("<div/>").attr("id","tmpDocHolder");c.html(b);var a=$("span",c);if(LOUISE.Core.IsRtl){c.find("br").replaceWith('<p style="margin:0;"></p>')}a.each(function(e){if($(this).parents("li, ul").length){return true}var d=a.eq(e-1);var f=a.eq((e+1));if($(this).parent().attr("id")==f.parent().attr("id")&&f.length&&f.css("text-align")&&$(this).css("text-align")!=f.css("text-align")){$(this).css("display","block");$(this).css("margin","0px")}else{if((!f.length&&!$(this).prev().length)||(f.parent().attr("id")!=$(this).parent().attr("id")&&!$(this).prev().length)){$(this).css("display","block");$(this).css("margin","0px")}}if(d.parent().attr("id")==$(this).parent().attr("id")&&d.css("display")&&d.css("display")!=$(this).css("display")){if($(this).contents(":first").length&&$(this).contents(":first")[0].nodeName.toLowerCase()=="br"){$(this).contents(":first").remove()}else{if(d.contents(":last").length&&d.contents(":last")[0].nodeName.toLowerCase()=="br"){d.contents(":last").remove()}}}});$.each($("ul",c),function(){var f=$("<ul></ul>");var e=[];var d=$(this).find("*").contents();d.each(function(h){var j=$(this).parentsUntil("a").length!=$(this).parents().length;if($(this)[0].nodeType==3&&!j){e.push($(this).parents("span").first().clone().html($(this).text()))}else{if($(this)[0].nodeType==3&&j){var k=$(this).parents("a").first();if(k.length>0){e.push($('<a href="'+k.attr("href")+'" onclick="'+k.attr("onclick")+'" title="'+k.attr("title")+'">'+$(this).text()+"</a>"))}}}if($(this)[0].nodeName.toLowerCase()=="br"||h==d.length-1){var g=$("<li></li>");if(e.length>0){g.css({"font-family":e[0].css("font-family"),"font-size":e[0].css("font-size"),color:e[0].css("color"),"text-align":e[0].css("text-align")})}for(var h=0;h<e.length;h++){g.append(e[h])}e=[];if($.trim(g.text()).length>0){f.append(g)}}});$(this).html(f.html());f=null});$.each($("a",c),function(d){$(this).attr("title",$("#"+LOUISE.Core.Text.TypeMapping.Student_4+"_"+$(this).attr("title"),c).text());$(this).css({color:LOUISE.Core.Text.LinkColor,"text-decoration":LOUISE.Core.Text.LinkDecoration});$(this).find("span").css({color:LOUISE.Core.Text.LinkColor,"text-decoration":LOUISE.Core.Text.LinkDecoration});var e=$(this);$(this).find("*").each(function(){if($(this).css("display")=="block"){e.css("display","block");return false}})});return c.html()}}})();
LOUISE.Core.XML.Slide.HTMLV3=(function(){(function(){})();function b(e){if(e.toLowerCase().indexOf("tooltip:")===0){return e.substring(e.indexOf(":")+1)}else{if(e.toLowerCase().indexOf("#tooltip:")!=-1){return e.substring(e.lastIndexOf(":")+1)}}return null}function a(e){if(e.indexOf("UID:")!==0){return e}var f=e.split(":");e="goto:["+f[f.length-1]+"]";return e}function c(e){if(e.toLowerCase().indexOf("http:")!==0&&e.toLowerCase().indexOf("https:")!==0&&e.toLowerCase().indexOf("file:")!==0){return e}e="url:"+e;return e}function d(e){$.each($("a",e),function(h){var g=$(this).attr("href");var j=b(g);g=g.split("#");g=g[0];g=a(g);g=c(g);var f="#"+LOUISE.Core.Text.TypeMapping.Student_4+"_"+j;var k=$(f,e).text();k=$.trim(k);$(this).attr("title",k);$(this).attr("onclick","LOUISE.Navigation.FromLink('"+g+"');return false;");$(this).attr("href","#");$(this).css({color:LOUISE.Core.Text.LinkColor,"text-decoration":LOUISE.Core.Text.LinkDecoration});$(this).find("span").css({color:LOUISE.Core.Text.LinkColor,"text-decoration":LOUISE.Core.Text.LinkDecoration})});return e}return{Create:function(e){var f=$("<div/>").attr("id","tmpDocHolder");f.html(e);f=d(f);$.each($("*",f),function(g){var h=$(this).css("font-size");if(h){$(this).attr("data-orgSize",h)}});$.each($("li, ul",f),function(h){$(this).css({margin:"",padding:"",});var g=$(this);var j;if(g.prop("tagName").toLowerCase()=="li"){g.find("span, p").each(function(k){j=$(this).css("color");if(j==""||j=="#000000"){$(this).css("color","#000")}})}});$.each($("table",f),function(g){$(this).css("width","100%")});return f.html()}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Environment=(function(){var m;var g;var s;var n;var f;var c;var p;var b;var k;var e;var q;var h;var i;(function(){s=d();m=s.islecturescreen&&s.islecturescreen.toString().toLowerCase()==="true";g=s.islecturescreen!==undefined;r();n=a();f=s.print&&s.print.toLowerCase()=="true";c=s.printfilters?s.printfilters.toLowerCase().split("|"):[];p=s.printcbt;b=o();k=parseInt(s["goto"],10);e=s.lang;q=s.mediaonly&&s.mediaonly.toLowerCase()=="true";h=m?1:0;i=j()})();function l(){if(typeof L2SSErunnner=="undefined"||!L2SSErunnner||!L2SSErunnner.commandLine){if(!window.location.search){return null}else{return window.location.search.substring(1).replace(/\&/g,",")}}else{return L2SSErunnner.commandLine.split("?")[1]}}function d(){var y=l();var v={};if(y){var x=y.split(",");for(var u=0;u<x.length;u++){var z=x[u].indexOf("=");if(z>0){var t=x[u].substring(0,z);var w=x[u].substring(z+1);v[t.toLowerCase()]=w}}}return v}function a(){if(g){if(m){return{x:parseInt(s.x,10),y:parseInt(s.y,10),w:parseInt(s.w,10),h:parseInt(s.h,10)}}else{return{x:parseInt(s.x,10),y:parseInt(s.y,10),w:parseInt(s.w,10),h:parseInt(s.h,10)}}}else{return{x:0,y:0,w:screen.availWidth,h:screen.availHeight}}}function r(){if(g){document.title=m?"LOUISE-Presentation-Screen":"LOUISE-Trainer-Screen"}else{document.title="LOUISE-Presentation-Screen"}}function o(){if(s.procID){return s.procID.replace(/-/g,"")}return null}function j(){return Math.random().toFixed(4).replace("0.","").toString()}return{PrintMode:f,PrintFilters:c,PrintCBT:p,ProccessID:b,EditorStartPoint:k,EditorLanguage:e,EditorFullscreen:q,IsLectureScreen:m,MultiScreen:g,WindowNumber:h,WindowID:i,ScreenRect:n}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Constants=(function(){(function(){})();return{SCALE_TEXT_TO_ORIGIN:true,SCALE_ORIGIN:{width:1024,height:768},AUTO_SCALE_PRIMARY_SCREEN_TEXT:true,DISPLAY_4_BY_3:true,ADD_EMPTY_LASTMODULE:false,TITLE_AREA_HEIGHT:120,BREAD_CRUMB_SEPARATOR:" > ",BOTTOM_CONTAINER_HEIGHT:82,BOTTOM_CONTAINER_MIN_HEIGHT:48,TOP_CONTAINER_HEIGHT:82,TEXT_XSL_PATH_V_2X:"resources/xsl/LOUISE.Core.Text_V_2X.xsl",TEXT_XSL_PATH_V_3:"resources/xsl/LOUISE.Core.Text_V_3.xsl",TEXT_HEIGHT:"30%",TEXT_WIDTH:"50%",TEXT_PLATE_HEIGHT:"auto",TEXT_PLATE_WIDTH:"50%",TRAINER_TEXT_HEIGHT:"40%",TRAINER_TEXT_WIDTH:"65%",TEXT_TYPE_MAPPING:{VER_1:{Student_1:"description",Student_2:"page",Student_3:"drilldown",Student_4:"tooltip",Trainer_1:"keyPoints",Trainer_2:"workingProcedure",Trainer_3:"additionalInformation",PrimaryScreenText:"page"},VER_2_6:{Student_1:"Student_1",Student_2:"Student_2",Student_3:"Student_3",Student_4:"Student_4",Trainer_1:"Trainer_1",Trainer_2:"Trainer_2",Trainer_3:"Trainer_3",PrimaryScreenText:"Student_2"},VER_3_0:{Student_1:"Student_1",Student_2:"Student_2",Student_3:"Student_3",Student_4:"Student_4",Trainer_1:"Trainer_1",Trainer_2:"Trainer_2",Trainer_3:"Trainer_3",PrimaryScreenText:"Student_2"}},MODULE_PADDING:{top:0,left:0,bottom:0,right:0},TEXT_PADDING:{top:32,left:32,bottom:32,right:32},TEXT_PLATE_PADDING:{top:48,left:48,bottom:48,right:48},TEXT_PLATE_BG_IMG:"resources/Images/70-trans-bg.png",PRELOADER_BG_IMG:"resources/Images/preloader.gif",VIDEO_PLAYER_SIZE:{width:650,height:366},VIDEO_POSTER_PATH:"resources/images/video.jpg",IMAGE_NOT_FOUND_IMG:"resources/images/not-found.png",COURSE_TREE_SETTINGS:{width:250,inset:5}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Layout=(function(){var e="8446f314-912f-4240-9a6c-749c013c16e6";var d=Math.random()+""+Math.random();var h=true;(function(){LOUISE.Core.Events.Register(d,e)})(this);function b(){var i="#panel_bottom_container, #footer-top-border,#tools-panel, #nav-btn-panel, #panel_content_text, #nav-text-indicator, #progress-bar, #nav-text-indicator, #search-box, #search-result-link, #panel_left_middle_container, #panel_module_container, #header-navigation-panel, #header-title, #close-button, #bread-crumbs";$(i).addClass("rtl")}function f(){var j=Math.min(LOUISE.Environment.ScreenRect.w,$("body").innerWidth());var i=Math.min(LOUISE.Environment.ScreenRect.h,$("body").innerHeight());var l;l=(i/3)*4;l=Math.min(l,j);var k={top:0,left:Math.round((j-l)/2)};$("#main-container").width(Math.round(l)+"px");$("#main-container").offset(k)}function g(i){$("#panel_top_container").hide();$("#drop-shade-top").hide();$("#panel_middle_container").height($(window).height()-LOUISE.Constants.BOTTOM_CONTAINER_HEIGHT);$("#panel_bottom_container").height(LOUISE.Constants.BOTTOM_CONTAINER_HEIGHT);$("#drop-shade-bottom").css("bottom",LOUISE.Constants.BOTTOM_CONTAINER_HEIGHT);$("#close-button").hide();LOUISE.Layout.TogglePanels.CourseMenu(!i);LOUISE.Layout.TogglePanels.TrainerText(!i)}function c(i){if(LOUISE.Environment.MultiScreen){$("#navigation-toolbar").hide();$("#close-button").hide()}if(!LOUISE.Environment.PrintMode&&LOUISE.Constants.DISPLAY_4_BY_3){f()}$("#panel_top_container").height(LOUISE.Constants.TOP_CONTAINER_HEIGHT);$("#drop-shade-top").css("top",LOUISE.Constants.TOP_CONTAINER_HEIGHT);$("#panel_middle_container").height($(window).height()-LOUISE.Constants.BOTTOM_CONTAINER_HEIGHT-$("#panel_top_container").outerHeight());$("#panel_bottom_container").height(LOUISE.Constants.BOTTOM_CONTAINER_HEIGHT);$("#drop-shade-bottom").css("bottom",LOUISE.Constants.BOTTOM_CONTAINER_HEIGHT);$("#panel_left_middle_container").width(LOUISE.Constants.COURSE_TREE_SETTINGS.width);if(!LOUISE.Environment.MultiScreen&&h&&!i){LOUISE.Layout.TogglePanels.CourseMenu(true);h=false}else{LOUISE.Layout.TogglePanels.CourseMenu(LOUISE.Layout.TogglePanels.CourseMenuVisible)}}function a(i){LOUISE.Core.Events.Execute(d,e,i)}return{TextPlateMode:"",IsTrainerScreen:false,ON_DEFAULT_LAYOUT:e,GetSlideArea:function(){return $("#panel_middle_container")},DefaultScreens:function(){$("#main-container").css({width:"100%",height:"100%"});if(LOUISE.Application.IsRtl){b()}var i=LOUISE.Application.SelectedLanguage===null;LOUISE.Layout.IsTrainerScreen=LOUISE.Environment.MultiScreen&&!LOUISE.Environment.IsLectureScreen;if(LOUISE.Layout.IsTrainerScreen){g(i)}else{c(i)}a({rtl:LOUISE.Application.IsRtl,trainerScreen:LOUISE.Layout.IsTrainerScreen,multiScreen:LOUISE.Environment.MultiScreen,langMenu:i})}}})();
LOUISE.Layout.GUIMode=(function(){var a="b708b8e2-ea08-4a7a-af2e-e5fc30cc204a";var d=Math.random()+""+Math.random();(function(){LOUISE.Core.Events.Register(d,a)})();function g(h){LOUISE.Core.Events.Execute(d,a,h)}function e(){var i=LOUISE.Navigation.CurrentModule.GetProperty("guimode");var h=LOUISE.Layout.TextPlateMode?" fill":"";if(!LOUISE.Core.Text.HasText){LOUISE.Navigation.CurrentModule.SetProperty("guimode","missingText"+h);i="missingText"+h}return i}function c(k){var h=k.toLowerCase().indexOf("fullscreen")===-1;var i=k.toLowerCase()!="language menu";var j=k.toLowerCase()!="title";return h&&i&&j}function b(){$("#panel_slide_area").width("100%");$("#panel_slide_area").height("100%");$("#drop-shade-bottom").show();$("#menu-toggle-btn").show();$("#panel_left_middle_container").show();$("#panel_bottom_container").removeClass("sup-fullscreen");$("#panel_bottom_container").height(LOUISE.Constants.BOTTOM_CONTAINER_HEIGHT);$("#panel_middle_container").height($(window).height()-LOUISE.Constants.BOTTOM_CONTAINER_HEIGHT-$("#panel_top_container").outerHeight());var h=($("#panel_left_middle_container").innerHeight()-$("#module-preview").outerHeight()-$("#search-bar").outerHeight()).toString()+"px";$("#panel_course_sub_menu").css("height",h+"px");$("#panel_course_sub_menu").css("top",LOUISE.Constants.TOP_CONTAINER_HEIGHT+"px");if(LOUISE.Layout.IsTrainerScreen){$("#drop-shade-top").hide();$("#panel_top_container").hide()}else{$("#drop-shade-top").show();$("#panel_top_container").show()}if(LOUISE.Layout.TogglePanels.TrainerTextVisible||LOUISE.Layout.IsTrainerScreen){$("#panel_slide_area").height($("#panel_module_container").innerHeight()-$("#panel_content_trainer_text").outerHeight())}$("#panel_content_text").show()}function f(h){h=h.toLowerCase();b();if(h.indexOf("image center top")===0){LOUISE.Layout.GUIMode.Render.TextBottom(h)}else{if(h.indexOf("image center bottom")===0){LOUISE.Layout.GUIMode.Render.TextTop(h)}else{if(h.indexOf("image right")===0){LOUISE.Layout.GUIMode.Render.TextLeft(h)}else{if(h.indexOf("image left")===0){LOUISE.Layout.GUIMode.Render.TextRight(h)}else{if(h.indexOf("image fill text left")===0){LOUISE.Layout.GUIMode.Render.FillPlateLeft(h)}else{if(h.indexOf("image fill text center")===0){LOUISE.Layout.GUIMode.Render.FillPlateCenter(h)}else{if(h.indexOf("image fill text right")===0){LOUISE.Layout.GUIMode.Render.FillPlateRight(h)}else{if(h.indexOf("title")===0){LOUISE.Layout.GUIMode.Render.Title(h)}else{if(h.indexOf("text only")===0){LOUISE.Layout.GUIMode.Render.TextOnly(h)}else{if(h.indexOf("fullscreen fill")===0){LOUISE.Layout.GUIMode.Render.FullscreenFill(h)}else{if(h.indexOf("fullscreen")===0){LOUISE.Layout.GUIMode.Render.Fullscreen(h)}else{if(h.indexOf("super fullscreen")===0){LOUISE.Layout.GUIMode.Render.SuperFullscreen(h)}else{if(h.indexOf("missingtext")===0){LOUISE.Layout.GUIMode.Render.MissingText(h)}else{if(h.indexOf("language menu")===0){LOUISE.Layout.GUIMode.Render.Language(h)}else{LOUISE.Layout.GUIMode.Render.TextLeft(h)}}}}}}}}}}}}}}g({guimode:h})}return{CurrentGUIMode:null,AutoHeadline:false,ON_GUI_MODE_SET:a,Set:function(l){if(!LOUISE.Navigation.CurrentModule){this.CurrentGUIMode=l.toLowerCase();f(l);return}if(LOUISE.Environment.EditorFullscreen){l="fullscreen"}this.AutoHeadline=parseInt(LOUISE.Navigation.CurrentModule.GetProperty("autoheadline"),10)==1;var j=LOUISE.Flash.InFlashFullscreen||LOUISE.Video.InVideoFullscreen;var i=j?true:LOUISE.Navigation.CurrentModule.GetProperty("stretch");var k=LOUISE.Navigation.CurrentModule.GetProperty("width");var h=LOUISE.Navigation.CurrentModule.GetProperty("height");if(LOUISE.Layout.IsTrainerScreen){this.AutoHeadline=false;this.CurrentGUIMode="image center middle"}else{l=l||"standard";LOUISE.Layout.TextPlateMode=l.indexOf(" fill")>-1?"fill":null;if(c(l)){l=e()}this.CurrentGUIMode=l.toLowerCase()}f(this.CurrentGUIMode);LOUISE.Layout.Media.ScaleToArea(k,h,i,LOUISE.Layout.TextPlateMode);LOUISE.Layout.Text.Align()}}})();
LOUISE.Layout.GUIMode.Render=(function(){(function(){})();function a(){var d=LOUISE.Flash.InFlashFullscreen||LOUISE.Video.InVideoFullscreen;if((LOUISE.Layout.GUIMode.AutoHeadline&&LOUISE.Core.Text.HasTitle&&!d)||LOUISE.Layout.GUIMode.CurrentGUIMode.toLowerCase()=="title"){var c=$("#panel_content_text").outerHeight()>=$("#panel_slide_area").innerHeight();if(!LOUISE.Layout.TextPlateMode||c){$("#panel_slide_title").css({position:"relative",top:"0px",left:"0px",height:LOUISE.Constants.TITLE_AREA_HEIGHT+"px",zIndex:0,"background-image":"none"}).show()}else{$("#panel_slide_title").css({position:"absolute",top:LOUISE.Constants.TEXT_PLATE_PADDING.top+"px",left:"0px",width:"100%",height:LOUISE.Constants.TITLE_AREA_HEIGHT+"px",zIndex:9010,"background-image":"url("+LOUISE.Constants.TEXT_PLATE_BG_IMG+")"}).show()}}else{$("#panel_slide_title").css({top:"0px",height:"0px",zIndex:1}).hide()}}function b(c){var f="|top|middle|bottom|";var d=c.toLowerCase().split(" ");var e=d[d.length-1];if(f.indexOf("|"+e+"|")!=-1){return e}return LOUISE.Settings.DEFAULT_TEXT_VALIGN}return{TextBottom:function(c){$("#panel_content_text").css("top","0px");$("#panel_content_text").css("left","0px");$("#panel_content_text").css("position","relative");$("#panel_content_text").css("max-width","100%");$("#panel_content_text").show();a();$("#panel_content_text").css("float","left");$("#panel_content_media").css("float","left");$("#panel_content_text").width("100%");$("#panel_content_text").height(LOUISE.Constants.TEXT_HEIGHT);$("#panel_content_media").css("top","0px");$("#panel_content_media").css("left","0px");$("#panel_content_media").css("position","relative");$("#panel_content_media").width("100%");$("#panel_content_media").height($("#panel_slide_area").innerHeight()-$("#panel_content_text").outerHeight()-$("#panel_slide_title").outerHeight());LOUISE.Layout.Text.TextAlign="left";LOUISE.Layout.Text.TextVerticalAlign="middle";LOUISE.Layout.Media.MediaAlign="center";LOUISE.Layout.Media.MediaVerticalAlign="middle";LOUISE.Layout.Media.MediaVerticalAlign=b(c)},TextTop:function(c){$("#panel_content_text").css("float","left");$("#panel_content_media").css("float","left");a();$("#panel_content_text").css("position","absolute");$("#panel_content_text").css("top",$("#panel_slide_title").outerHeight()+"px");$("#panel_content_text").css("left","0px");$("#panel_content_text").css("max-width","100%");$("#panel_content_text").width("100%");$("#panel_content_text").height(LOUISE.Constants.TEXT_HEIGHT);$("#panel_content_text").show();$("#panel_content_media").css("position","absolute");$("#panel_content_media").width("100%");$("#panel_content_media").css("top",($("#panel_content_text").outerHeight()+$("#panel_slide_title").outerHeight())+"px");$("#panel_content_media").height($("#panel_slide_area").innerHeight()-$("#panel_content_text").outerHeight()-$("#panel_slide_title").outerHeight());LOUISE.Layout.Text.TextAlign="left";LOUISE.Layout.Text.TextVerticalAlign="middle";LOUISE.Layout.Media.MediaAlign="center";LOUISE.Layout.Media.MediaVerticalAlign=b(c)},TextLeft:function(c){$("#panel_content_text").css("top","0px");$("#panel_content_text").css("left","0px");$("#panel_content_text").css("position","relative");$("#panel_content_text").css("max-width","100%");$("#panel_content_text").show();a();$("#panel_content_text").css("float","right");$("#panel_content_media").css("float","right");$("#panel_content_media").css("clear","both");var d=LOUISE.Layout.IsTrainerScreen?LOUISE.Constants.TRAINER_TEXT_WIDTH:LOUISE.Constants.TEXT_WIDTH;$("#panel_content_text").width(d);$("#panel_content_text").height($("#panel_slide_area").innerHeight()-$("#panel_slide_title").outerHeight());$("#panel_content_media").css("top","0px");$("#panel_content_media").css("left","0px");$("#panel_content_media").css("position","relative");$("#panel_content_media").width($("#panel_slide_area").innerWidth()-$("#panel_content_text").outerWidth()-1);$("#panel_content_media").height($("#panel_slide_area").innerHeight()-$("#panel_slide_title").outerHeight());LOUISE.Layout.Text.TextAlign="left";LOUISE.Layout.Text.TextVerticalAlign=b(c);LOUISE.Layout.Media.MediaAlign="right";LOUISE.Layout.Media.MediaVerticalAlign="top";LOUISE.Layout.Media.MediaVerticalAlign=b(c)},TextRight:function(c){$("#panel_content_text").css("top","0px");$("#panel_content_text").css("left","0px");$("#panel_content_text").css("position","relative");$("#panel_content_text").css("max-width","100%");$("#panel_content_text").show();a();$("#panel_content_text").css("float","left");$("#panel_content_media").css("float","left");var d=LOUISE.Layout.IsTrainerScreen?LOUISE.Constants.TRAINER_TEXT_WIDTH:LOUISE.Constants.TEXT_WIDTH;$("#panel_content_text").width(d);$("#panel_content_text").height($("#panel_slide_area").innerHeight()-$("#panel_slide_title").outerHeight());$("#panel_content_media").css("top","0px");$("#panel_content_media").css("left","0px");$("#panel_content_media").css("position","relative");$("#panel_content_media").width($("#panel_slide_area").innerWidth()-$("#panel_content_text").outerWidth()-1);$("#panel_content_media").height($("#panel_slide_area").innerHeight()-$("#panel_slide_title").outerHeight());LOUISE.Layout.Text.TextAlign="left";LOUISE.Layout.Text.TextVerticalAlign=b(c);LOUISE.Layout.Media.MediaAlign="left";LOUISE.Layout.Media.MediaVerticalAlign="top";LOUISE.Layout.Media.MediaVerticalAlign=b(c)},FillPlateLeft:function(c){$("#panel_content_media").css({top:"0px",left:"0px",width:"100%",height:"100%",position:"relative"});var e=$("#panel_content_media").innerWidth()-(LOUISE.Constants.TEXT_PLATE_PADDING.left+LOUISE.Constants.TEXT_PLATE_PADDING.right);$("#panel_content_text").css({"max-width":e+"px",position:"absolute",top:LOUISE.Constants.TEXT_PLATE_PADDING.top+"px",left:LOUISE.Constants.TEXT_PLATE_PADDING.left+"px",width:LOUISE.Constants.TEXT_PLATE_WIDTH,height:LOUISE.Constants.TEXT_PLATE_HEIGHT,"background-image":"url("+LOUISE.Constants.TEXT_PLATE_BG_IMG+")"}).show();a();var d=$("#panel_slide_title").position().top+$("#panel_slide_title").outerHeight();$("#panel_content_text").css({top:LOUISE.Constants.TEXT_PLATE_PADDING.top+d+"px",height:$("#panel_content_text").innerHeight()-d+"px"});$("#panel_content_media").css({height:$("#panel_content_media").innerHeight()-d+"px"});LOUISE.Layout.Media.MediaAlign="center";LOUISE.Layout.Media.MediaVerticalAlign="middle";LOUISE.Layout.Text.PlateAlign="left";LOUISE.Layout.Text.PlateVerticalAlign=b(c);LOUISE.Layout.Text.TextVerticalAlign="middle"},FillPlateCenter:function(c){this.FillPlateLeft(c);LOUISE.Layout.Text.PlateAlign="center";LOUISE.Layout.Text.TextVerticalAlign="middle"},FillPlateRight:function(c){this.FillPlateLeft(c);LOUISE.Layout.Text.PlateAlign="right";LOUISE.Layout.Text.TextVerticalAlign="middle"},Title:function(){$("#panel_content_text").css("position","relative").css("float","left").hide();$("#panel_content_media").css("float","left").width("0px");a();$("#panel_slide_title").css("top",(($("#panel_slide_area").innerHeight()-LOUISE.Constants.TITLE_AREA_HEIGHT)/2)-Math.min(LOUISE.Constants.TITLE_AREA_HEIGHT*0.2,32));LOUISE.Layout.Media.MediaAlign="center";LOUISE.Layout.Media.MediaVerticalAlign="middle"},TextOnly:function(){a();$("#panel_content_media").width("0%");$("#panel_content_text").css("top","0px");$("#panel_content_text").css("left","0px");$("#panel_content_text").css("position","relative");$("#panel_content_text").css("float","left");$("#panel_content_text").width("100%");var c=LOUISE.Layout.TextPlateMode?0:$("#panel_slide_title").outerHeight();$("#panel_content_text").height($("#panel_slide_area").innerHeight()-c);$("#panel_content_media").height($("#panel_slide_area").innerHeight()-$("#panel_slide_title").outerHeight());LOUISE.Layout.Text.TextAlign="center";LOUISE.Layout.Text.TextVerticalAlign="middle";LOUISE.Layout.Media.MediaAlign="center";LOUISE.Layout.Media.MediaVerticalAlign="middle"},FullscreenFill:function(){this.FillPlateLeft("Image fill text center top");LOUISE.Layout.Text.PlateAlign="center";$("#panel_content_text").hide()},Fullscreen:function(){a();$("#panel_content_text").hide();$("#panel_content_media").css("top","0px");$("#panel_content_media").css("left","0px");$("#panel_content_media").css("position","relative");$("#panel_content_media").css("float","left");$("#panel_content_media").width("100%");var c=LOUISE.Layout.TextPlateMode?0:$("#panel_slide_title").outerHeight();$("#panel_content_media").height($("#panel_slide_area").innerHeight()-c);$("#panel_content_text").height($("#panel_slide_area").innerHeight()-$("#panel_slide_title").outerHeight());LOUISE.Layout.Media.MediaAlign="center";LOUISE.Layout.Media.MediaVerticalAlign="middle"},SuperFullscreen:function(){$("#panel_top_container").hide();$("#drop-shade-bottom").hide();$("#drop-shade-top").hide();$("#panel_bottom_container").addClass("sup-fullscreen");$("#panel_bottom_container").height(LOUISE.Constants.BOTTOM_CONTAINER_MIN_HEIGHT);$("#panel_middle_container").height($(window).height()-LOUISE.Constants.BOTTOM_CONTAINER_MIN_HEIGHT);$("#panel_content_text").hide();var d=($("#panel_left_middle_container").innerHeight()-$("#module-preview").outerHeight()-$("#search-bar").outerHeight()).toString()+"px";$("#panel_course_sub_menu").css("height",d);$("#panel_course_sub_menu").css("top","0px");a();$("#panel_content_media").css("top","0px");$("#panel_content_media").css("left","0px");$("#panel_content_media").css("position","relative");$("#panel_content_media").css("float","left");$("#panel_content_media").width("100%");var c=LOUISE.Layout.TextPlateMode?0:$("#panel_slide_title").outerHeight();$("#panel_content_media").height($("#panel_slide_area").innerHeight()-c);LOUISE.Layout.Media.MediaAlign="center";LOUISE.Layout.Media.MediaVerticalAlign="middle"},MissingText:function(){$("#panel_content_text").css("top","0px");$("#panel_content_text").css("left","0px");$("#panel_content_text").css("position","relative");$("#panel_content_text").css("float","left");$("#panel_content_text").hide();a();$("#panel_content_media").css("top","0px");$("#panel_content_media").css("left","0px");$("#panel_content_media").css("position","relative");$("#panel_content_media").css("float","left");$("#panel_content_media").width("100%");var c=LOUISE.Layout.TextPlateMode?0:$("#panel_slide_title").outerHeight();$("#panel_content_media").height($("#panel_slide_area").innerHeight()-c);LOUISE.Layout.Media.MediaAlign="center";LOUISE.Layout.Media.MediaVerticalAlign="middle"},Language:function(){$("#panel_content_media").css("top","0px");$("#panel_content_media").css("left","0px");$("#panel_content_media").css("position","relative");$("#panel_slide_title").hide();$("#panel_module_container").width("100%");$("#panel_content_media").width("100%");$("#panel_content_media").height("100%");$("#panel_left_middle_container").hide()}}})();
LOUISE.Layout.TogglePanels=(function(){var g="ad2f307a-53da-4161-825e-ff907cfd74df";var d="b97ebd70-22f6-4eaa-8b37-16d8bcfbb655";var e=Math.random()+""+Math.random();(function(){LOUISE.Core.Events.Register(e,g);LOUISE.Core.Events.Register(e,d)})();function f(h){LOUISE.Core.Events.Execute(e,g,h)}function b(h){LOUISE.Core.Events.Execute(e,d,h)}function c(h){if(h||(LOUISE.Layout.IsTrainerScreen&&LOUISE.Application.CourseStarted)){$("#panel_left_middle_container").show();$("#panel_left_middle_container").width(LOUISE.Constants.COURSE_TREE_SETTINGS.width);$("#panel_module_container").width($("#panel_middle_container").innerWidth()-$("#panel_left_middle_container").outerWidth());while($("#panel_left_middle_container").position().top>LOUISE.Constants.TOP_CONTAINER_HEIGHT){$("#panel_module_container").width($("#panel_module_container").width()-1)}var i=($("#panel_left_middle_container").innerHeight()-$("#module-preview").outerHeight()-$("#search-bar").outerHeight()).toString()+"px";$("#panel_course_sub_menu").css("height",i)}else{$("#panel_module_container").width("100%");$("#panel_left_middle_container").hide()}}function a(h){if(h||(LOUISE.Layout.IsTrainerScreen&&LOUISE.Application.CourseStarted)){$("#panel_content_trainer_text").css("display","block");$("#panel_content_trainer_text").height(LOUISE.Constants.TRAINER_TEXT_HEIGHT);$("#panel_slide_area").height($("#panel_module_container").innerHeight()-$("#panel_content_trainer_text").outerHeight())}else{$("#panel_content_trainer_text").css("display","none");$("#panel_slide_area").height("100%")}}return{CourseMenuVisible:false,TrainerTextVisible:false,ON_NAV_MENU_TOGGLE:g,ON_TRAINER_TEXT_TOGGLE:d,CourseMenu:function(h){c(h);if(!LOUISE.Application.CourseStarted){this.CourseMenuVisible=LOUISE.Layout.IsTrainerScreen?false:h}else{this.CourseMenuVisible=h}f({visible:this.CourseMenuVisible})},TrainerText:function(h){a(h);if(!LOUISE.Application.CourseStarted){this.TrainerTextVisible=LOUISE.Layout.IsTrainerScreen?false:h}else{this.TrainerTextVisible=h}b({visible:this.TrainerTextVisible})}}})();
LOUISE.Layout.Media=(function(){(function(){})();return{MediaAlign:"canter",MediaVerticalAlign:"middle",IgnorePadding:false,Align:function(d,b){var h=d||this.MediaAlign;var c=b||this.MediaVerticalAlign;var f=$("#mediaObject");if(LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.html5){f=$("#VideoDomObject")}var a=$("#panel_content_media");var e=this.IgnorePadding?{top:0,left:0,bottom:0,right:0}:LOUISE.Constants.MODULE_PADDING;var g={position:"relative",top:0,left:0};switch(h.toLowerCase()){case"left":g.left=e.left+"px";break;case"right":g.left=e.left+"px";break;case"center":g.left=(a.outerWidth()-f.outerWidth())/2+"px";break;default:this.Align("left");return}switch(c.toLowerCase()){case"top":g.top=e.top+"px";break;case"bottom":g.top=(a.height()-f.outerHeight()-e.bottom)+"px";break;case"middle":g.top=(a.outerHeight()-f.outerHeight())/2+"px";break}f.css(g)},ScaleToArea:function(c,m,a,n){var i=$("#mediaObject");if(LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.html5){i=$("#VideoDomObject")}var o=$("#panel_content_media");var f=this.IgnorePadding||n?{top:0,left:0,bottom:0,right:0}:LOUISE.Constants.MODULE_PADDING;var l=o.width()-f.left-f.right;var k=o.height()-f.top-f.bottom;var b;var h;if(c===0||m===0||c===undefined||m===undefined){b=l;h=k}else{b=c;h=m}if(a==1||n||b>l||h>k){var d=b/h;var e=l/k;var g;var j;if(d<=e){j=k;g=j*d}else{g=l;j=g/d}if(n){j=k;g=j*d;if(g<l){g=l;j=g/d}}i.width(g);i.height(j)}else{i.width(b);i.height(h)}this.Align(this.MediaAlign,this.MediaVerticalAlign)}}})();
LOUISE.Layout.Text=(function(){(function(){})();function a(h,f){if(!LOUISE.Constants.AUTO_SCALE_PRIMARY_SCREEN_TEXT){return}f=f||$("#panel_content_text");h=h||f.find(".inner_text_container").first();if(!f.length||!h.length){return}var k=h.outerHeight();var l=h.outerWidth();var j=0;var c=200;var e=h.find("*");if(e.length<1){e=h}var d=h.css("white-space").toLowerCase()=="nowrap";var i=l>f.outerWidth()&&d;var g=k>f.outerHeight();while((i||g)&&j<c){e.each(function(){var n=$(this);var o=n.css("font-size");var m=parseInt(o,10);if(m<=4){return}$(this).css("font-size",(m-1)+"px")});k=h.outerHeight();l=h.outerWidth();j++;i=l>f.outerWidth()&&d;g=k>f.outerHeight()}}function b(d){if(!d){a();return}if(d.outerWidth()<10||d.outerHeight()<10){return}var c=d.find(".inner_text_container").first();if(c.length<1){return}if(c.text().length<1){return}a(c,d)}return{TextAlign:"left",TextVerticalAlign:"top",PlateAlign:"left",PlateVerticalAlign:"middle",Align:function(n,p,d,f){n=n||this.TextAlign;p=p||this.TextVerticalAlign;d=d||$("#panel_content_text");var m=d;var e=m.find(".inner_text_container").first();if(f){b(m)}var q=m.innerWidth();var o=m.innerHeight();var s;s={position:"relative",top:0,left:0,right:0,bottom:0};var h=0;switch(n.toLowerCase()){case"left":h=0;break;case"right":h=q-e.outerWidth();s.right="auto";break;case"center":h=(q-e.outerWidth())/2;s.right="auto";break;default:this.Align("left");return}s.left=h>0?h+"px":"0px";if(LOUISE.Application.IsRtl){var c=s.right;var g=s.left;s.left=c;s.right=g}var k=0;var t=LOUISE.Layout.GUIMode.AutoHeadline?$("#panel_slide_title").position().top+$("#panel_slide_title").outerHeight():0;var j=$("#panel_content_text").outerHeight()>=$("#panel_slide_area").innerHeight()-t;var i=d.attr("id")=="panel_content_text";if(LOUISE.Layout.TextPlateMode&&j&&i){p=LOUISE.Layout.Text.PlateVerticalAlign}switch(p.toLowerCase()){case"top":k=0;break;case"bottom":k=o-e.outerHeight();break;case"middle":k=(o-e.outerHeight())/2;s.bottom="auto";break}s.top=k>0?k+"px":"0px";e.css(s);if(LOUISE.Layout.TextPlateMode&&d.attr("id")=="panel_content_text"){this.AlignPlate()}},AlignPlate:function(){var f=$("#panel_content_text");var d=$("#panel_slide_area");var e=LOUISE.Layout.GUIMode.AutoHeadline?$("#panel_slide_title").position().top+$("#panel_slide_title").outerHeight():0;var c=d.innerHeight()-e;var g={};switch(this.PlateAlign){case"left":g.left=LOUISE.Constants.TEXT_PLATE_PADDING.left+"px";break;case"center":g.left=((d.innerWidth()-f.outerWidth())/2)+"px";break;case"right":g.left=((d.innerWidth()-f.outerWidth())-LOUISE.Constants.TEXT_PLATE_PADDING.right)+"px";break}switch(this.PlateVerticalAlign){case"top":g.top=(LOUISE.Constants.TEXT_PLATE_PADDING.top+e)+"px";break;case"middle":g.top=(e+((c-f.outerHeight())/2))+"px";break;case"bottom":g.top=((d.innerHeight()-f.outerHeight())-LOUISE.Constants.TEXT_PLATE_PADDING.bottom)+"px";break}f.css(g)},SetPadding:function(c,e){var g=c||LOUISE.Constants.TEXT_PADDING;var f=e||$("#panel_content_text");var d=f.find(".inner_text_container").first();d.css({"padding-top":g.top+"px","padding-right":g.right+"px","padding-bottom":g.bottom+"px","padding-left":g.left+"px"})},ScaleToOrigin:function(c){if(!LOUISE.Constants.SCALE_TEXT_TO_ORIGIN){return}c=c||$("#panel_content_text");var d=c.find("*");if(d.length<1){d=c}var e=$("#main-container").innerWidth()/LOUISE.Constants.SCALE_ORIGIN.width;d.each(function(){var f=$(this);var h=f.attr("data-orgSize");var g=parseFloat(h,10);if(!isNaN(g)){f.css("font-size",(g*e)+"pt")}})},ScaleTextDivToParent:function(d,c){a(d,c)}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Flash=(function(){(function(){})();return{InFlashFullscreen:false}})();
LOUISE.Flash.Communication=(function(){var _sessionData={};(function(){})();function _setSessionData(arg){var splittedArg=arg.split(":");if(splittedArg.length<2){return"Error: Key, value format error"}var key=splittedArg[0];var val=splittedArg[1];if(key.length<1){return"Error: Key has length of zero"}_sessionData[key]=val;return"Succeeded: "+key+" = "+val}function _getSessionData(arg){if(!_sessionData[arg]){return"Error: Key is not present in session"}return _sessionData[arg]}return{Fullscreen:function(onOff){var currentModule=LOUISE.Navigation.CurrentModule;if(parseInt(currentModule.GetProperty("flvmax"),10)!=1){return}var w=currentModule.GetProperty("width");var h=currentModule.GetProperty("height");var stretch=parseInt(currentModule.GetProperty("stretch"),10);LOUISE.Layout.Media.IgnorePadding=true;if(onOff){var defaultStretch=stretch==1;var isVideo=LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.flash;var videoMaxOn=parseInt(currentModule.GetProperty("flvmax"),10)!==0;if(defaultStretch||(isVideo&&videoMaxOn)){LOUISE.Layout.Media.IgnorePadding=true;stretch=1}LOUISE.Flash.InFlashFullscreen=true;LOUISE.Layout.GUIMode.Set("fullscreen");LOUISE.UI.Render.Slide.BackgroundColor(currentModule,true);LOUISE.Layout.Media.ScaleToArea(w,h,stretch)}else{var orgGuiMode=currentModule.GetProperty("guimode");try{if(LOUISE.Media.FLV.SWFDOMObject&&LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.flash){LOUISE.Media.FLV.SWFFrame.stopMovie()}}catch(e){}LOUISE.UI.Render.Slide.BackgroundColor(currentModule);LOUISE.Flash.InFlashFullscreen=false;LOUISE.Layout.Media.IgnorePadding=false;LOUISE.Layout.GUIMode.Set(orgGuiMode)}},GetSessionData:function(arg){return _getSessionData(arg)},SetSessionData:function(arg){return _setSessionData(arg)},GetLanguage:function(){return LOUISE.Application.SelectedLanguage},CommandFromFlash:function(arg){var theCommand="";var theValue="";if((arg.indexOf("(")>-1)&&arg.indexOf("(")<arg.indexOf(")")){eval("this."+arg);return}if(arg.indexOf(",")>-1){theCommand=arg.split(",")[0];theValue=arg.split(",")[1]}else{theCommand=arg;theValue=""}var fval=parseInt(theValue,10);var onoff;switch(theCommand.toLowerCase()){case"requestfocus":this.requestFocus();break;case"showdrilldown":if(!isNaN(fval)){LOUISE.Navigation.ToDrilldown(fval-1)}break;case"showtxtinimg":if(!isNaN(fval)){LOUISE.UI.TextInImages.ShowInstance(fval)}break;case"hidetxtinimg":if(!isNaN(fval)){LOUISE.UI.TextInImages.HideInstance(fval)}break;case"navigationforward":onoff=theValue=="on";if(onoff){LOUISE.UI.NavigationButtons.EnableForwardNavigation()}else{LOUISE.UI.NavigationButtons.DisableForwardNavigation()}LOUISE.UI.AllowNavForward=onoff;break;case"navigationbackward":onoff=theValue=="on";if(onoff){LOUISE.UI.NavigationButtons.EnableBackNavigation()}else{LOUISE.UI.NavigationButtons.DisableBackNavigation()}LOUISE.UI.AllowNavBackward=onoff;break;case"navprev":this.navPrev();break;case"navnext":this.navNext();break;case"navlabel":if(!isNaN(fval)){this.navLabel(parseInt(fval,10))}break;case"setsessiondata":return _setSessionData(theValue);break;case"getsessiondata":return _getSessionData(theValue);break}},requestFocus:function(){LOUISE.Media.SWF.ContentRequestedFocus=true},getCBTLang:function(){return LOUISE.Flash.Communication.GetLanguage()},toggleFullscreen:function(onOff){LOUISE.Flash.Communication.Fullscreen(onOff)},navPrev:function(){if(!LOUISE.UI.AllowNavBackward){return}LOUISE.Navigation.Backward();var syncCheckNum=Math.random();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.Backward();var check="+syncCheckNum+";}")},navNext:function(){if(!LOUISE.UI.AllowNavForward){return}LOUISE.Navigation.Forward();var syncCheckNum=Math.random();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.Forward();var check="+syncCheckNum+";}")},navLabel:function(index){LOUISE.Navigation.ToPage(index-1);var syncCheckNum=Math.random();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.ToPage("+(index-1)+");var check="+syncCheckNum+";}")}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Flash.Communication.Video=(function(){(function(){})();return{PlayPauseVideo:function(){if(!LOUISE.Media.FLV.SWFDOMObject||LOUISE.Media.LoadedVideo!=LOUISE.Media.VideoType.flash){return}try{LOUISE.Media.FLV.SWFFrame.playPauseMovie()}catch(a){alert(a.message)}},ActionAfterVideo:function(a){var b=Math.random();if(a.toLowerCase()==="next"){LOUISE.Flash.InFlashFullscreen=false;LOUISE.Layout.Media.IgnorePadding=false;LOUISE.Navigation.Forward();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.Forward();var check="+b+";}")}else{if(a.toLowerCase()==="back"){LOUISE.Flash.InFlashFullscreen=false;LOUISE.Layout.Media.IgnorePadding=false;LOUISE.Navigation.Backward();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.Backward();var check="+b+";}")}}}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Video=(function(){(function(){})();return{InVideoFullscreen:false}})();
LOUISE.Video.Communication=(function(){(function(){})();function a(c){if(!c||!c.controls){return}if(c.playState==1||c.playState==2||c.playState==10){c.controls.play()}else{c.controls.pause()}}function b(c){if(!c){return}if(!LOUISE.Media.HTML5Video.Playing){c.play()}else{c.pause()}}return{Fullscreen:function(m){var i=LOUISE.Navigation.CurrentModule;var d=document.getElementById("VideoDomObject");if(parseInt(i.GetProperty("FLVmax"),10)!=1){return}var l=i.GetProperty("width");var g=i.GetProperty("height");var e=parseInt(i.GetProperty("stretch"),10);LOUISE.Layout.Media.IgnorePadding=false;if(m){var f=e==1;var c=LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.windows;var k=parseInt(i.GetProperty("flvmax"),10)==1;if(f||(c&&k)){l=0;g=0;LOUISE.Layout.Media.IgnorePadding=true;e=1}LOUISE.Video.InVideoFullscreen=true;LOUISE.Layout.GUIMode.Set("fullscreen");LOUISE.UI.Render.Slide.BackgroundColor(i,true);LOUISE.Layout.Media.ScaleToArea(l,g,e)}else{var j=i.GetProperty("guimode");if(LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.windows){d.controls.pause()}else{d.pause()}LOUISE.UI.Render.Slide.BackgroundColor(i);LOUISE.Video.InVideoFullscreen=false;LOUISE.Layout.Media.IgnorePadding=false;LOUISE.Layout.GUIMode.Set(j)}},PlayPauseVideo:function(){var c=LOUISE.Navigation.CurrentModule;var d=document.getElementById("VideoDomObject");if(LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.windows){a(d)}else{if(LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.html5){b(d)}}},ActionAfterVideo:function(d){var e=Math.random();if(d.toLowerCase()==="loop"){if(LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.html5){document.getElementById("VideoDomObject").play()}}else{if(d.toLowerCase()==="next"){LOUISE.Video.InVideoFullscreen=false;LOUISE.Layout.Media.IgnorePadding=false;LOUISE.Navigation.Forward();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.Forward();var check="+e+";}")}else{if(d.toLowerCase()==="back"){LOUISE.Video.InVideoFullscreen=false;LOUISE.Layout.Media.IgnorePadding=false;LOUISE.Navigation.Backward();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.Backward();var check="+e+";}")}else{var c=document.getElementById("VideoDomObject");if(LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.html5){c.pause();c.currentTime=0}else{c.Settings.PlayCount=1;c.controls.stop()}}}}}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Media=(function(){var d="69133ac8-a5ec-4d67-a137-2916e629a0b1";var e=Math.random()+""+Math.random();(function(){LOUISE.Core.Events.Register(e,d)})();function b(g){LOUISE.Core.Events.Execute(e,d,g)}function f(){var g=$("<div />").attr("id","mediaObject").append($("<div />").attr("id","endSlideText").text(LOUISE.Application.SystemStrings.END_OF_SLIDE_SHOW));$("#panel_content_media").empty().append(g);b({success:true,width:0,height:0})}function c(g){LOUISE.Media.LoadedVideo=LOUISE.Media.VideoType.flash;g.posterSrc=g.ProjectContentPath+"thumbs/"+g.Source.substring(0,g.Source.lastIndexOf("."))+".jpg";if(LOUISE.Environment.MultiScreen&&!LOUISE.Environment.IsLectureScreen){g.posterSrc=LOUISE.Constants.VIDEO_POSTER_PATH;g.SetProperty("stretch",0);LOUISE.Media.IMG.Load(g)}else{if(LOUISE.Environment.PrintMode){LOUISE.Media.IMG.Load(g)}else{if(g.Type=="mp4"&&typeof HTMLVideoElement!=="undefined"){LOUISE.Media.LoadedVideo=LOUISE.Media.VideoType.html5;LOUISE.Media.HTML5Video.Load(g)}else{LOUISE.Media.FLV.Load(g)}}}}function a(g){LOUISE.Media.LoadedVideo=LOUISE.Media.VideoType.windows;if(LOUISE.Environment.MultiScreen&&!LOUISE.Environment.IsLectureScreen){g.posterSrc=LOUISE.Constants.VIDEO_POSTER_PATH;g.SetProperty("stretch",0);LOUISE.Media.IMG.Load(g)}else{if(LOUISE.Environment.PrintMode){g.posterSrc=g.ProjectContentPath+"thumbs/"+g.Source.substring(0,g.Source.lastIndexOf("."))+".jpg";LOUISE.Media.IMG.Load(g)}else{LOUISE.Media.Video.Load(g)}}}return{VideoType:{none:0,flash:1,windows:2,html5:4},LoadedVideo:0,ON_MEDIA_LOADED:d,LoadedEventArg:function(i,h,g){this.success=i||false;this.width=h||0;this.height=g||0;return this},GetAutoLanguageVersion:function(l){var j=l.substring(0,l.lastIndexOf("."));var i=l.substring(l.lastIndexOf(".")+1);var h=j+"_"+LOUISE.Application.SelectedLanguage+"."+i;var k=LOUISE.Application.File.Exists(h);var g=j.substring(j.length-3,j.length)=="_en";if(!k&&g){j=j.substring(0,j.length-3);h=j+"_"+LOUISE.Application.SelectedLanguage+"."+i;k=LOUISE.Application.File.Exists(h)}return k?h:l},Load:function(i){LOUISE.Media.Video.RemoveVideoLayer();$("#panel_content_media").empty();this.LoadedVideo=this.VideoType.none;if(i.GetProperty("guimode").toLowerCase()=="text only"){b({success:true,width:0,height:0});return}switch(i.Type){case"swf":LOUISE.Media.SWF.Load(i);break;case"flv":c(i);break;case"mp4":c(i);break;case"f4v":c(i);break;case"avi":a(i);break;case"mov":a(i);break;case"wmv":a(i);break;case"mpg":a(i);break;case"mpeg":a(i);break;case"jpeg":LOUISE.Media.IMG.Load(i);break;case"jpg":LOUISE.Media.IMG.Load(i);break;case"gif":LOUISE.Media.IMG.Load(i);break;case"png":LOUISE.Media.IMG.Load(i);break;case"bmp":LOUISE.Media.IMG.Load(i);break;case"tif":LOUISE.Media.IMG.Load(i);break;case"tiff":LOUISE.Media.IMG.Load(i);break;case"html":LOUISE.Media.HTML.Load(i);break;case"htm":LOUISE.Media.HTML.Load(i);break;case"pdf":LOUISE.Media.PDF.Load(i);break;case"end":f();break;default:b({success:false,width:0,height:0})}if(LOUISE.Environment.PrintMode){var j=null;var h=$("#mediaObject").data("events");if(h&&h.load){j=h.load[0].handler}var g=$("#panel_middle_container").html();$("#main-container").html(g);if(j){$("#mediaObject").load(j)}}},TriggerLoaded:function(g){b(g)}}})();
LOUISE.Media.IMG=(function(){(function(){})();return{Load:function(b){var a=new Image();a.onload=function(){b.Properties.width=a.width;b.Properties.height=a.height;LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(true,a.width,a.height))};a.onerror=function(){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(false,0,0))};a.onabort=function(){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(false,0,0))};var d=b.ProjectContentPath+b.Source;if(b.posterSrc){d=b.posterSrc}setTimeout(function(){a.src=d+"?"+Math.random()},0);var c=$("<img>").attr("src",d).attr("id","mediaObject");if(b.posterSrc){c.addClass("video-poster").css("cursor","pointer");c.click(LOUISE.UI.EventHandlers.VideoPosterClick)}$("#panel_content_media").empty().append(c)}}})();
LOUISE.Media.SWF=(function(){(function(){})();return{SWFFrame:null,SWFDOMObject:null,ContentRequestedFocus:false,Load:function(d){var b=d.ProjectContentPath+d.Source;this.ContentRequestedFocus=false;if(window.frames.mediaObject){$("#mediaObject").attr("src","about:blank");window.frames.mediaObject.location.reload()}$("#panel_content_media").empty();$("#panel_content_media").append($('<iframe name="mediaObject" src="resources/plugins/swfContainer.html#../../'+b+'" frameborder="0" scrolling="no" application="yes">').attr("id","mediaObject"));var a=d.Properties.width||0;var e=d.Properties.height||0;var c=this;$("#mediaObject").load(function(){c.SWFFrame=$("#mediaObject")[0].contentWindow;c.SWFDOMObject=c.SWFFrame.getSWFObject();if(!$(this)[0].contentWindow.Load){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(false,0,0));return}$(this)[0].contentWindow.Load(function(){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(true,a,e))})});$("#mediaObject").click(function(){if(c.ContentRequestedFocus){return}$("body").click()})}}})();
LOUISE.Media.FLV=(function(){(function(){})();return{SWFFrame:null,SWFDOMObject:null,Load:function(c){var d=LOUISE.Application.File.Path.ToRoot(c.ProjectContentPath+c.Source);d=LOUISE.Media.GetAutoLanguageVersion(d);var a="resources/plugins/L2flvPlayer_default.swf";a+="?videoURL="+d+"&autoStart="+c.GetProperty("autoStartflv")+"&actionAfterVideo="+c.GetProperty("actionaftervideo");c.Properties.width=LOUISE.Constants.VIDEO_PLAYER_SIZE.width;c.Properties.height=LOUISE.Constants.VIDEO_PLAYER_SIZE.height;if(window.frames.mediaObject){$("#mediaObject").attr("src","about:blank");window.frames.mediaObject.location.reload()}$("#panel_content_media").empty();$("#panel_content_media").empty().append($('<iframe src="resources/plugins/swfContainer.html#../../'+a+'" frameborder="0" scrolling="no" application="yes">').attr("id","mediaObject"));var b=this;$("#mediaObject").load(function(){b.SWFFrame=$("#mediaObject")[0].contentWindow;b.SWFDOMObject=b.SWFFrame.getSWFObject();if(!$(this)[0].contentWindow.Load){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(false,0,0));return}$(this)[0].contentWindow.Load(function(){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(true,c.Properties.width,c.Properties.width))})})}}})();
LOUISE.Media.HTML5Video=(function(){(function(){})();return{Playing:false,Load:function(d){var f=LOUISE.Application.File.Path.ToRoot(d.ProjectContentPath+d.Source);f=LOUISE.Media.GetAutoLanguageVersion(f);var g=LOUISE.Application.File.Exists(LOUISE.Application.File.Path.ToRoot(d.posterSrc))?d.posterSrc:"";$("#panel_content_media").empty().html('<video width="100" height="100" id="VideoDomObject" controls="controls" poster="'+g+'"><source src="'+f+'" type="video/mp4"></source></video>');d.Properties.width=LOUISE.Constants.VIDEO_PLAYER_SIZE.width;d.Properties.height=LOUISE.Constants.VIDEO_PLAYER_SIZE.height;var b=$("#VideoDomObject");var e=b[0];var c=d.GetProperty("flvbgcolor")||"000000";b.css("background-color","#"+c);$("#VideoDomObject").bind("loadedmetadata",function(){b.attr({width:e.videoWidth,height:e.videoHeight});d.Properties.width=e.videoWidth;d.Properties.height=e.videoHeight});var a=this;$("#VideoDomObject").bind("canplay",function(){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(true,d.Properties.width,d.Properties.height));a.Playing=false;if(parseInt(d.GetProperty("autoStartflv"),10)==1){LOUISE.Video.Communication.PlayPauseVideo()}});$("#VideoDomObject").bind("error",function(h){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(false,0,0))});$("#VideoDomObject").bind("ended",function(){LOUISE.Video.Communication.ActionAfterVideo(d.GetProperty("actionaftervideo"))});$("#VideoDomObject").bind("play",function(){a.Playing=true;LOUISE.Video.Communication.Fullscreen(true)});$("#VideoDomObject").bind("pause",function(){a.Playing=false;LOUISE.Video.Communication.Fullscreen(false)})}}})();
LOUISE.Media.HTML=(function(){(function(){})();return{Load:function(b){var c=b.ProjectContentPath+b.Source;var a=$('<iframe src="'+c+'" frameborder="0" name ="mediaObject" id="mediaObject" />');$("#panel_content_media").empty().append(a);$("#mediaObject").ready(function(){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(true,0,0))})}}})();
LOUISE.Media.Video=(function(){var c=null;(function(){})();function e(g){var f=c;if(g==10){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(true,f.Properties.width,f.Properties.height));if(parseInt(f.GetProperty("autoStartflv"),10)==1){LOUISE.Video.Communication.PlayPauseVideo()}}}function a(){wmp=LOUISE.Media.Video.PlayerObjet;if(!wmp||!wmp.status){return}var f=wmp.status.toLowerCase();if(f=="finished"){LOUISE.Video.Communication.ActionAfterVideo(c.GetProperty("actionaftervideo"))}else{if(f=="stopped"){LOUISE.Video.Communication.Fullscreen(false);wmp.uiMode="full"}else{if(f=="paused"){if(LOUISE.Media.Video.IsMouseOver){wmp.uiMode="full"}}else{if(f.indexOf("playing")==0){LOUISE.Video.Communication.Fullscreen(true);if(!LOUISE.Media.Video.IsMouseOver){if(wmp.fullScreen){return}wmp.uiMode="none"}}}}}}function b(){wmp=LOUISE.Media.Video.PlayerObjet;if(!wmp||!wmp.playState){return}LOUISE.Media.Video.IsMouseOver=true;setTimeout(function(){if(wmp.playState==1||wmp.playState==10||wmp.fullScreen){return}if(LOUISE.Media.Video.IsMouseOver){wmp.uiMode="full"}},50)}function d(){wmp=LOUISE.Media.Video.PlayerObjet;if(!wmp||!wmp.playState){return}LOUISE.Media.Video.IsMouseOver=false;setTimeout(function(){if(wmp.playState==1||wmp.playState==10||wmp.fullScreen){return}if(!LOUISE.Media.Video.IsMouseOver){wmp.uiMode="none"}},1000)}return{IsMouseOver:false,PlayerObjet:null,RemoveVideoLayer:function(){if(this.PlayerObjet){this.PlayerObjet.detachEvent("PlayStateChange",e);this.PlayerObjet.detachEvent("StatusChange",a);this.PlayerObjet.detachEvent("onmouseover",b);this.PlayerObjet.detachEvent("onmouseout",d);this.PlayerObjet.fullScreen=false;this.PlayerObjet=null}},Load:function(g){c=g;var i=LOUISE.Application.File.Path.ToRoot(g.ProjectContentPath+g.Source);i=LOUISE.Media.GetAutoLanguageVersion(i);$("#panel_content_media").empty().append($("<div>").attr("id","mediaObject").attr("class","video"));g.Properties.width=LOUISE.Constants.VIDEO_PLAYER_SIZE.width;g.Properties.height=LOUISE.Constants.VIDEO_PLAYER_SIZE.height;var h=document.getElementById("VideoDomObjectStub");if(!h.controls){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(false,0,0));return}var f=$(h.cloneNode(true)).attr("id","VideoDomObject");document.getElementById("mediaObject").appendChild(f[0]);setTimeout(function(){var j=document.getElementById("VideoDomObject");LOUISE.Media.Video.PlayerObjet=j;if(j.addEventListener){j.addEventListener("PlayStateChange",e,false);j.addEventListener("StatusChange",a,false);j.addEventListener("onmouseover",b,false);j.addEventListener("onmouseout",d,false)}else{if(j.attachEvent){j.attachEvent("PlayStateChange",e);j.attachEvent("StatusChange",a);j.attachEvent("onmouseover",b);j.attachEvent("onmouseout",d)}}j.url=LOUISE.Application.File.LocalPath(i)},0)}}})();
LOUISE.Media.PDF=(function(){(function(){})();function a(c){c=c||0;var b=$("#mediaObject")[0].readyState;if(b=="complete"){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(true,0,0));$("#panel_content_media").show()}else{if(c>-1){LOUISE.Media.TriggerLoaded(new LOUISE.Media.LoadedEventArg(false,0,0));$("#panel_content_media").empty().show();return}setTimeout(function(){LOUISE.Media.PDF.checkloaded(c++)},100)}}return{Load:function(b){var d=b.ProjectContentPath+b.Source;var c=$('<iframe src="'+d+'" frameborder="0" name ="mediaObject" id="mediaObject" />');$("#panel_content_media").empty().append(c).hide();a()},}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Media.Pen=(function(){_canvas=null;_penSWF=null;(function(){})();return{Visible:false,Create:function(a){if(a){_canvas=a}if(_canvas.length<1){_canvas=null;return}_penSWF=document.getElementById("PenSWFObject");if(typeof _penSWF.clearBackground=="undefined"){var c=document.getElementsByTagName("embed");for(var b=0;b<c.length;b++){if(c[b].attributes.getNamedItem("name").value=="PenSWFObject"){_penSWF=c[b];break}else{_penSWF=null}}}if(!_penSWF){_canvas=null;return}_penSWF.onfocus=function(){};_canvas.mouseleave(function(){_penSWF.penOut()});_canvas.mouseenter(function(){_penSWF.penIn()})},Show:function(){this.Visible=true;if(!_canvas||(LOUISE.Environment.MultiScreen&&!LOUISE.Environment.IsLectureScreen)){return}var b=LOUISE.Layout.GetSlideArea();var d=b.width();var a=b.height();_canvas.width(d+"px").height(a+"px");_canvas.css("top",b.offset().top).css("left",b.offset().left).css("visibility","visible");var c="0x"+LOUISE.UI.ModuleBackgroundColor;setTimeout(function(){if(_penSWF.initPen){_penSWF.initPen(c,d,a)}},0)},Clear:function(){if(!_canvas||!_penSWF||!_penSWF.clearPen||(LOUISE.Environment.MultiScreen&&!LOUISE.Environment.IsLectureScreen)){return}_penSWF.clearPen()},Hide:function(){this.Visible=false;if(!_canvas||(LOUISE.Environment.MultiScreen&&!LOUISE.Environment.IsLectureScreen)){return}_canvas.width("0px").height("0px").css("visibility","hidden")}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Navigation=(function(){var h=Math.random()+""+Math.random();var t="1a11c17b-e2c4-402c-b668-05180b334ac2";var e="03fb394e-ed36-4f21-af03-e9b686689957";var m="fcd51123-113a-469a-896f-0ab48259bc09";var i="47064ed4-61a1-46e4-8c62-276ede88437c";var a="02180dcf-6aff-4f5b-9e3a-26ad9e348748";var f=false;var q=null;var w=null;var j=[];var g=null;(function(){LOUISE.Core.Events.Register(h,t);LOUISE.Core.Events.Register(h,e);LOUISE.Core.Events.Register(h,m);LOUISE.Core.Events.Register(h,i);LOUISE.Core.Events.Register(h,a)})();function x(z){LOUISE.Core.Events.Execute(h,t,z)}function b(z){LOUISE.Core.Events.Execute(h,e,z)}function n(z){LOUISE.Core.Events.Execute(h,m,z)}function u(z){LOUISE.Core.Events.Execute(h,i,z)}function c(z){LOUISE.Core.Events.Execute(h,a,z)}function r(A){for(var B=0;B<LOUISE.Core.CBTTree.Modules.Count();B++){var z=LOUISE.Core.CBTTree.Modules.GetAt(B);if(z.UID==A){return z}}return null}function v(A){if(!LOUISE.Navigation.CurrentModule){return}if(LOUISE.Navigation.CurrentModule.VisitedPages){return}LOUISE.Navigation.CurrentModule.VisitedPages=[];for(var z=0;z<=A;z++){LOUISE.Navigation.CurrentModule.VisitedPages[z]=0}}function l(B,A){var z=A||0;LOUISE.Navigation.Pages=LOUISE.Navigation.SWF.CountPages();if(LOUISE.Navigation.Pages<0&&z<100){z++;setTimeout(function(){l(B,z)},100);return}B()}function p(){var z=LOUISE.Navigation.CurrentModule;if(parseInt(z.GetProperty("hidden"),10)==1||z.ID=="-1"){return}if($.inArray(z,LOUISE.Navigation.VisitedModules)==-1){LOUISE.Navigation.VisitedModules.push(z)}}function s(B,C,A){var z=B+=C;var D=LOUISE.Core.CBTTree.Modules.GetAt(z);while(D){if(z>LOUISE.Core.CBTTree.Modules.Count()){return null}if(parseInt(D.GetProperty("hidden"),10)==1&&A){return D}else{if(parseInt(D.GetProperty("hidden"),10)!=1&&!A){return D}}z+=C;D=LOUISE.Core.CBTTree.Modules.GetAt(z)}return null}function k(){var z=LOUISE.Navigation.CurrentModule;if(!z){return}var C=parseInt(z.GetProperty("hidden"),10)==1;var B=C&&parseInt(z.GetProperty("linknexthidden"),10)==1;if(!B&&q!==null){return q}var A=z.Index;return s(A,1,B)}function y(){var z=LOUISE.Navigation.CurrentModule;if(!z){return}var B=false;if(j.length===0&&q!==null){return q}if(j.length>0){B=true;return j.pop()}var A=z.Index;return s(A,-1,B)}function o(){clearTimeout(g);g=null}function d(B){if(LOUISE.Navigation.CurrentModule){if(LOUISE.Settings.ALLOW_FREE_NAVIGATION!=undefined&&!LOUISE.Settings.ALLOW_FREE_NAVIGATION&&B.Index>LOUISE.Navigation.CurrentModule.Index&&!LOUISE.Application.DevMode){var z=$.inArray(B,LOUISE.Navigation.VisitedModules)!=-1;var A=LOUISE.Navigation.CurrentModule.IsDone();if(!A&&!z){return false}if(A&&B.ViewIndex>LOUISE.Navigation.CurrentModule.ViewIndex+1&&!z){return false}}}return true}return{ON_PAGE_CHANGED:t,ON_NAVIGATION_ERROR:e,ON_DRILLDOWN_CHANGED:m,ON_MODULE_CHANGED:i,ON_TEXT_LINK_CLIKED:a,CurrentModule:null,CurrentHeader:null,CurrentCourse:null,Pages:0,CurrentPage:0,VisitedModules:[],DrilldownHistory:[],DrilldownPosition:undefined,InSlideShow:false,NavigateToUID:function(A){var z=r(A);if(z){this.ToModule(z)}else{b("1. Navigation target not found!")}},NavigateToID:function(z){for(var B=0;B<LOUISE.Core.CBTTree.Modules.Count();B++){var A=LOUISE.Core.CBTTree.Modules.GetAt(B);if(A.ID==z){this.ToModule(A);return}}b("2. Navigation target not found!")},NavigateToNthModule:function(A){var z=LOUISE.Core.CBTTree.GetAllModules();this.ToModule(z[A])},DrilldownForward:function(){if(this.DrilldownPosition==this.DrilldownHistory.length-1){this.ToPage(this.CurrentPage);return}else{LOUISE.Core.Text.ToDrilldown(this.DrilldownHistory[this.DrilldownPosition+1])}this.DrilldownPosition++;var z={historyPosition:this.DrilldownPosition,history:this.DrilldownHistory};n(z)},DrilldownBackward:function(){if(this.DrilldownPosition===0){this.ToPage(this.CurrentPage);return}else{LOUISE.Core.Text.ToDrilldown(this.DrilldownHistory[this.DrilldownPosition-1])}this.DrilldownPosition--;var z={historyPosition:this.DrilldownPosition,history:this.DrilldownHistory};n(z)},ToDrilldown:function(A){o();var z=this.DrilldownHistory;var C=this.DrilldownPosition;if(A==z[C]){return}if(!C){C=0}if(C<z.length-1){z=z.slice(0,C+1)}LOUISE.Core.Text.ToDrilldown(A);z.push(A);C=z.length-1;var B={historyPosition:C,history:z};this.DrilldownPosition=C;this.DrilldownHistory=z;n(B)},FromLink:function(B){var C=B.indexOf(":");var A=B.substring(0,C);var z=B.substring(C+1,B.length);c({linktype:A,linkarg:z})},ToPage:function(z){o();this.CurrentPage=z;if(this.CurrentModule.Type==="swf"){this.SWF.ToPage(z)}this.CurrentModule.VisitedPages[z]=1;p();this.DrilldownHistory=[];this.DrilldownPosition=undefined;x({page:z,length:this.Pages})},Forward:function(z){if(this.CurrentPage===this.Pages||z){this.ToModule(k());return}this.CurrentPage+=1;this.ToPage(this.CurrentPage)},Backward:function(z){if(this.CurrentPage===0||z){this.ToModule(y(),true);return}this.CurrentPage-=1;this.ToPage(this.CurrentPage)},ApplySlideshow:function(){var E=this.CurrentModule;var A=parseInt(E.GetProperty("slideshow"),10)==1;if(A){this.InSlideShow=true;var B=parseInt(E.GetProperty("slideTime"),10)*1000;if(!isNaN(B)){var D=LOUISE.Core.CBTTree.Modules.GetAt(E.Index+1);if(LOUISE.UI.AllowNavForward&&D.ID!=-1){g=setTimeout(function(){LOUISE.Navigation.Forward()},B)}else{var z=0;var C=LOUISE.Core.CBTTree.Modules.GetAt(z);while(parseInt(C.GetProperty("hidden"),10)==1){z++;C=LOUISE.Core.CBTTree.Modules.GetAt(z)}g=setTimeout(function(){LOUISE.Navigation.ToModule(C)},B)}}}else{this.InSlideShow=false}},IsTestIntheWay:function(B){if(LOUISE.Application.DevMode){return false}var C=this.CurrentModule.Index;for(var A=C;A<=B.Index;A++){var z=LOUISE.Core.CBTTree.Modules.GetAt(A);if(parseInt(z.GetProperty("hidden"),10)!=1&&B!=z&&z.TestData.type!=LOUISE.Core.CBTItem.Testype.none&&!z.TestData.passed){return true}}return false},ToModule:function(A,D){if(A===null){b("3. Navigation target not found!");return}if(A==this.CurrentModule){return}if(!d(A)){return}o();var z=parseInt(A.GetProperty("hidden"),10)==1;if(z){if(q===null){q=this.CurrentModule;w=this.CurrentPage}else{if(!D){j.push(this.CurrentModule)}}}else{q=null;j=[]}this.CurrentModule=A;f=D;var C=A.GetCourseParent();var B=A.GetHeaderParent();if(C!=this.CurrentCourse){this.CurrentCourse=C}if(B!=this.CurrentHeader){this.CurrentHeader=B}this.CurrentPage=0;this.Pages=0;u(LOUISE.Navigation.CurrentModule)},InitNavigation:function(C){var B=parseInt(this.CurrentModule.GetProperty("hidden"),10)==1;var z=0;if(w!==null&&!B){z=w}if(LOUISE.Navigation.CurrentModule.Type==="swf"){var A=this;l(function(){A.Pages=Math.max(A.Pages,LOUISE.Core.Text.Pages);v(A.Pages);z=f&&w===null?A.Pages:z;A.ToPage(z);if(C){C()}})}else{this.Pages=Math.max(this.Pages,LOUISE.Core.Text.Pages);v(this.Pages);z=f&&w===null?this.Pages:z;this.ToPage(z);if(C){C()}}if(!B){w=null}},ApplyFilter:function(A){var B=A.split(",");if(B.length<1||A==""||A=="null"){B=[]}LOUISE.Core.CBTTree.SetFilter(B);LOUISE.Navigation.SetSCORMHistory();var C=Math.random();var z=B.length<1?"[]":"['"+B.join("','")+"']";LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Core.CBTTree.SetFilter("+z+");var check="+C+";}")},HistoryFromScormdata:function(z){var A=[];var I=[];var D=[];var G=[];for(var H=0;H<z.length;H++){var E=z[H].split("/");A[H]=E[0];I[H]=E[1].split("^");if(E.length>2){D[H]=parseInt(E[2],10);G[H]=parseInt(E[3],10)==1}else{D[H]=0;G[H]=false}}for(var F=0;F<LOUISE.Core.CBTTree.Modules.Count();F++){var J=LOUISE.Core.CBTTree.Modules.GetAt(F);for(var C=0;C<A.length;C++){if(A[C]==J.ID){J.VisitedPages=[];for(var B=0;B<I[C].length;B++){alert(I[C][B]);J.VisitedPages[B]=I[C][B]}J.TestData.score=D[C];J.TestData.passed=G[C];LOUISE.SCORM.AddScore(J.TestData.score,J);this.VisitedModules.push(J)}}}},SetSCORMHistory:function(){var B=this.VisitedModules.length;for(var A=0;A<B;A++){if(parseInt(this.VisitedModules[A].GetProperty("hidden"),10)==1||!this.VisitedModules[A].IsDone()){B-=1}}var z=B/LOUISE.Core.CBTTree.Modules.Count(true);LOUISE.SCORM.UpdatePosition(this.CurrentModule,this.VisitedModules,z)}}})();
LOUISE.Navigation.SWF=(function(){(function(){})();return{ToPage:function(b,e){if(!LOUISE.Media.SWF.SWFDOMObject){return}if(typeof(LOUISE.Media.SWF.SWFDOMObject.StopPlay)==="undefined"){return}var c=parseInt(LOUISE.Navigation.CurrentModule.GetProperty("autoStartSWF"),10)==1;LOUISE.Media.SWF.SWFDOMObject.StopPlay();LOUISE.Media.SWF.SWFDOMObject.playing=false;var a=b+1;LOUISE.UI.Print.PrintFrame=false;if(LOUISE.Environment.PrintMode&&LOUISE.UI.Print&&!e){a="#print";LOUISE.UI.Print.PrintFrame=true}try{LOUISE.Media.SWF.SWFDOMObject.TGotoLabel("/",a.toString());LOUISE.Media.SWF.SWFDOMObject.TCallLabel("/",a.toString())}catch(d){if(LOUISE.UI.Print.PrintFrame){this.ToPage(1,true);return}}if(c){LOUISE.Media.SWF.SWFDOMObject.Play();LOUISE.Media.SWF.SWFDOMObject.playing=true}},CountPages:function(){var e=0;try{e=LOUISE.Media.SWF.SWFDOMObject.PercentLoaded();if(e<0){var f=LOUISE.Media.SWF.SWFDOMObject.TGetProperty("/",12);var b=LOUISE.Media.SWF.SWFDOMObject.TGetProperty("/",5);e=Math.round((f/b)*100)}}catch(d){e=0}if(e<100){return -1}var a=0;var c=null;for(a;a<100;a++){try{LOUISE.Media.SWF.SWFDOMObject.TGotoLabel("/",(a+1).toString());LOUISE.Media.SWF.SWFDOMObject.TCallLabel("/",(a+1).toString());if(c==LOUISE.Media.SWF.SWFDOMObject.TCurrentLabel("/")){LOUISE.Media.SWF.SWFDOMObject.Rewind();break}c=LOUISE.Media.SWF.SWFDOMObject.TCurrentLabel("/")}catch(d){LOUISE.Media.SWF.SWFDOMObject.Rewind();break}}return a==0?0:a-1}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.NavigationProxy=(function(){var _lastSyncMSG="";(function(){})();function _readCoockie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length)}}return null}function _writeCoockie(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString()}else{var expires=""}document.cookie=name+"="+escape(value)+expires+"; path=/"}function _popMsg(){var funcToRun=null;var messageStream=unescape(_readCoockie("msg"+LOUISE.Environment.ProccessID));if(messageStream&&messageStream!="null"){messages=messageStream.split("");var message=messages[0];var messageParts=message.split("|");var win=parseInt(messageParts[1],10);var func=messageParts[0];if(win!=LOUISE.Environment.WindowID){funcToRun=func;messages.shift();_writeCoockie("msg"+LOUISE.Environment.ProccessID,messages.join(""),1)}}return funcToRun}return{SyncScreens:function(){var syncMsg=_popMsg();if(!syncMsg||syncMsg=="null"){return}if(_lastSyncMSG==syncMsg){return}eval("("+syncMsg+")()");_lastSyncMSG=syncMsg},AddMsg:function(i_msg){var messageStream=unescape(_readCoockie("msg"+LOUISE.Environment.ProccessID));var messages=new Array();if(messageStream&&messageStream!="null"){messages=messageStream.split("")}messages.push(i_msg+"|"+LOUISE.Environment.WindowID);_writeCoockie("msg"+LOUISE.Environment.ProccessID,messages.join(""),1)},ClearAllMsg:function(){_writeCoockie("msg"+LOUISE.Environment.ProccessID,"",1)}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.UI=(function(){var a=Math.random()+""+Math.random();(function(){})();function b(){var c=LOUISE.Application.File.LocalPath(LOUISE.Application.File.Path.ToRoot("")+"LOUISE-Feedback-Tickets\\").split("\\").join("/");return c+"comments.txt"}return{ModuleBackgroundColor:"",LastActiveCourseBtn:null,LastActiveModuleBtn:null,LastActiveHeaderBtn:null,StopNavUntilLoad:false,AllowNavForward:true,AllowNavBackward:true,Remote:false,FocusNavigation:function(){$("#focus-grabber").focus()},ShowModuleInfo:function(){var c=LOUISE.UI.Render.Slide.ModuleInfo();var d=$("<div/>").attr("id","debugWin").html(c);LOUISE.UI.Modal.Show(a,d)},ShowFeedbackForm:function(){var d=LOUISE.UI.Render.Slide.FeedbackForm();var c=$("<div/>").attr("id","feedbackWin").html(d);LOUISE.UI.Modal.Show(a,c);$("#feedbackWin").click(function(f){f.stopPropagation()});$("#ticket-submit-btn").click(function(r){var x=[];var g=parseInt(LOUISE.Flash.Communication.GetSessionData("VIDA_KEY"),10);g=isNaN(g)?"N/A":g+1;var j=$("#ticket-name-txt").val();var w=$("#ticket-change-txt").val();var o=$("#ticket-reason-txt").val();if($.trim(j)===""){alert("Please enter a name");return}else{if($.trim(w)===""){alert("Please enter a message");return}}var y=new Date();var s=y.getFullYear().toString();var q=y.getMonth().toString();var v=y.getDay().toString();var n=y.getHours().toString();var k=y.getMinutes().toString();q=q.length>1?q:"0"+q;v=v.length>1?v:"0"+v;n=n.length>1?n:"0"+n;k=k.length>1?k:"0"+k;x.push(s+q+v+" "+n+":"+k);x.push("");x.push("Signed by:");x.push("\t"+j);x.push("");x.push("Module:");x.push("\t"+LOUISE.Core.CBTTree.CBTTitle);x.push("");x.push("Version:");x.push("\t"+LOUISE.Application.CBTVersion);x.push("");x.push("Case/Scenario:");x.push("\t"+LOUISE.Navigation.CurrentModule.Source);x.push("");x.push("Scenarion step:");x.push("\t"+g);x.push("");x.push("Suggested change:");var u=w.split("\n");for(var l=0;l<u.length;l++){x.push("\t"+u[l])}x.push("");x.push("Reason for change:");var t=o.split("\n");for(var l=0;l<t.length;l++){x.push("\t"+t[l])}x.push("");x.push("_______________________");x.push("");var p=b();LOUISE.Application.File.Write(p,x);var f=LOUISE.UI.Render.Slide.FeedbackResult();f=f.replace("{ticketName}",p.substring(p.lastIndexOf("/")+1));f=f.replace("{ticketPath}",p.substring(0,p.lastIndexOf("/")));$("#feedbackWin").html(f);$("a","#feedbackWin").click(function(h){h.stopPropagation()})})},EnterDevMode:function(c){LOUISE.UI.Render.Slide.DevMode(c)}}})();
LOUISE.UI.Modal=(function(){_currentOpenID=null;_modalBg=null;(function(){})();function a(d,e){var f=0;e=!e?", body":", "+e;var c=0;$(d+e).each(function(){c++;var g=$(this).css("z-index");if(g!="auto"){g=parseInt(g,10);f=g>f?g:f}});return f}function b(){var g=a("div","#main-container");var f=$("#main-container");var d=f.outerWidth();var e=f.outerHeight();var c=f.position().left;if(_modalBg){_modalBg.css({left:c+"px",width:d+"px",height:e+"px","z-index":g});return _modalBg}_modalBg=$("<div/>").attr("id","ui-modal-bg").css({position:"absolute",top:"0px",left:c+"px",width:d+"px",height:e+"px","background-image":'url("'+LOUISE.Constants.TEXT_PLATE_BG_IMG+'")',cursor:"pointer","z-index":g}).hide().appendTo("body").click(function(){LOUISE.UI.Modal.Hide()});return _modalBg}return{Visible:false,Show:function(d,g){if(d==_currentOpenID){this.Hide();return}else{if(_currentOpenID){this.Hide()}}_currentOpenID=d;var f=b();f.show();if(!g){return}f.append(g);g.css("position","absolute");var c=Math.round((f.innerHeight()-g.outerHeight())/2.5);var e=Math.round((f.innerWidth()-g.outerWidth())/2);g.css({top:c+"px",left:e+"px"});this.Visible=true},Hide:function(){var c=b();c.html("").hide();_currentOpenID=null;this.Visible=false}}})();
LOUISE.UI.Preloader=(function(){_preloaderPanel=null;_lastGuiMode="";_bgTimer=0;(function(){})();function b(){var d=_lastGuiMode;if(LOUISE.Navigation.CurrentModule){d=LOUISE.Navigation.CurrentModule.GetProperty("guimode")}if(_lastGuiMode==d||(LOUISE.Environment.MultiScreen&&!LOUISE.Environment.IsLectureScreen)){preLoaderDims=a()}else{var c=$("#panel_middle_container");preLoaderDims={w:c.outerWidth(),h:c.outerHeight(),x:c.position().left,y:c.position().top};_lastGuiMode=d}_preloaderPanel.css({top:preLoaderDims.y,left:preLoaderDims.x,width:preLoaderDims.w,height:preLoaderDims.h})}function a(){var c=$("#panel_module_container");return{w:c.outerWidth(),h:c.outerHeight(),x:c.offset().left-$("#main-container").position().left,y:c.offset().top}}return{SetPreloader:function(c){if(c.length>0){_preloaderPanel=c}},Show:function(d){if(_preloaderPanel===null){_preloaderPanel.css("cursor","default");LOUISE.UI.StopNavUntilLoad=true;if(d){d()}return}LOUISE.UI.StopNavUntilLoad=true;_preloaderPanel.css("cursor","wait");clearTimeout(_bgTimer);_preloaderPanel.stop(false,true).css("background-image","");_bgTimer=setTimeout(function(){_preloaderPanel.css("background-image","url("+LOUISE.Constants.PRELOADER_BG_IMG+")")},3000);b();var c=LOUISE.Navigation.InSlideShow?200:100;_preloaderPanel.css("display","block").fadeTo(0,0);_preloaderPanel.css("display","block").fadeTo(0,0).fadeTo(c,1,function(){if(d){d()}})},Hide:function(){if(_preloaderPanel===null){LOUISE.UI.StopNavUntilLoad=false;_preloaderPanel.css("cursor","default");return}_preloaderPanel.css("cursor","default");clearTimeout(_bgTimer);_preloaderPanel.css("background-image","");var c=LOUISE.Navigation.InSlideShow?200:100;_preloaderPanel.fadeTo(0,1).fadeTo(c,0,function(){LOUISE.UI.StopNavUntilLoad=false;_preloaderPanel.css("display","none")})}}})();
LOUISE.UI.EventHandlers=(function(){_resizeTimer=null;_moduleBtnHoverTimer=0;_shiftDown=false;_ctrlDown=false;_altDown=false;_devKeyCount=0;_activeSearchResultIndex=0;_enterKeyInSearchBox=false;(function(){})();function c(){var d=_ctrlDown;var e=Math.random();if(LOUISE.Navigation.DrilldownHistory.length>0&&!d){LOUISE.Navigation.DrilldownBackward();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.DrilldownBackward();var check="+e+";}")}else{if(LOUISE.UI.AllowNavBackward){LOUISE.Navigation.Backward(d);LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.Backward("+d+");var check="+e+";}")}}}function b(){var d=_ctrlDown;var e=Math.random();if(LOUISE.Navigation.DrilldownPosition<LOUISE.Navigation.DrilldownHistory.length&&!d){LOUISE.Navigation.DrilldownForward();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.DrilldownForward();var check="+e+";}")}else{if(LOUISE.UI.AllowNavForward){LOUISE.Navigation.Forward(d);LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.Forward("+d+");var check="+e+";}")}}}function a(e){var g=e.indexOf("[");var f=e.indexOf("]");if(g==-1||f==-1){return""}var d=e;d=d.substring(g+1);d=d.substring(0,f-1);return d}return{WindowResize:function(){var d=LOUISE.Layout.TogglePanels.CourseMenuVisible;$("#resizeHider").show();clearTimeout(_resizeTimer);_resizeTimer=setTimeout(function(){if(LOUISE.Application.CourseStarted){LOUISE.Application.Pause();LOUISE.Layout.DefaultScreens();LOUISE.Layout.GUIMode.Set(LOUISE.Layout.GUIMode.CurrentGUIMode);LOUISE.UI.Render.Slide.Title();LOUISE.UI.Render.Slide.MainScreenText({page:LOUISE.Navigation.CurrentPage,length:LOUISE.Navigation.Pages});LOUISE.UI.TextInImages.Resize();LOUISE.Application.Resume()}else{LOUISE.Layout.DefaultScreens();LOUISE.UI.Render.Slide.LanguageMenu()}$("#resizeHider").hide();LOUISE.Layout.TogglePanels.CourseMenu(d)},100)},DisplayError:function(d){alert(d)},NavigationError:function(d){if(!LOUISE.Environment.PrintMode){LOUISE.UI.EventHandlers.DisplayError("Navigation error: "+d)}},OnFiltered:function(){if(!LOUISE.Navigation.CurrentModule){return}LOUISE.Navigation.SetSCORMHistory();LOUISE.UI.NavigationButtons.SetNavigationButtons(LOUISE.Navigation.CurrentModule);LOUISE.UI.Render.CourseTree.Menu(LOUISE.Navigation.CurrentCourse);LOUISE.UI.Render.NavigationResult.Module(LOUISE.Navigation.CurrentModule);LOUISE.UI.Render.Progress.CBT(true)},EndScormSession:function(){LOUISE.SCORM.ExitLMS()},ModuleChanged:function(g){if(LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.flash&&LOUISE.Media.FLV.SWFFrame){try{LOUISE.Media.FLV.SWFFrame.stopMovie()}catch(d){}}LOUISE.Media.Pen.Clear();LOUISE.Application.Loaded=false;LOUISE.Flash.InFlashFullscreen=false;LOUISE.Video.InVideoFullscreen=false;LOUISE.UI.Modal.Hide();var f=LOUISE.Application.EditorVersion<3?LOUISE.Constants.TEXT_XSL_PATH_V_2X:LOUISE.Constants.TEXT_XSL_PATH_V_3;LOUISE.Core.Text.LoadModuleFile(g,f);$("body").css("cursor","wait");LOUISE.UI.Render.NavigationResult.Module(g);if(g.Type=="end"){$("#bread-crumbs, #header-title").hide()}else{$("#bread-crumbs, #header-title").show()}},PageChanged:function(d){LOUISE.UI.Render.Slide.MainScreenText(d);if(LOUISE.Media.Pen.Visible){LOUISE.Media.Pen.Clear()}LOUISE.UI.Render.NavigationResult.Page(d);LOUISE.UI.Render.Progress.CBT(d);LOUISE.UI.FocusNavigation();LOUISE.Navigation.SetSCORMHistory();if(!LOUISE.Environment.PrintMode){LOUISE.Navigation.ApplySlideshow()}},DrilldownChanged:function(d){LOUISE.UI.NavigationButtons.SetDrilldownNavigationButtons(d);LOUISE.Layout.Text.SetPadding();LOUISE.Layout.Text.Align()},MediaLoaded:function(d){if(!d.success){if(!LOUISE.Environment.PrintMode){LOUISE.UI.EventHandlers.DisplayError("Failed to load media")}}LOUISE.Layout.GUIMode.Set(LOUISE.Navigation.CurrentModule.GetProperty("guimode"));LOUISE.UI.TextInImages.Add(LOUISE.Navigation.CurrentModule);LOUISE.UI.Render.Slide.Title();LOUISE.UI.Render.Slide.TrainerText();LOUISE.Navigation.InitNavigation(function(){$("body").css("cursor","default");LOUISE.UI.Preloader.Hide();LOUISE.Application.Loaded=true})},LangSelectBtnClick:function(d){var f=d.attr("id");var e=f.replace(/lang_btn_/i,"");LOUISE.Application.SelectedLanguage=e;$(".langSelectBtn").fadeOut(0,function(){if($(this).attr("id")==f){LOUISE.Application.StartCourse();var g=Math.random();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Application.SelectedLanguage='"+e+"';LOUISE.Application.StartCourse();var check="+g+";}")}})},LangSelectBtnOver:function(d){d.addClass("flag-hover")},LangSelectBtnOut:function(d){d.removeClass("flag-hover")},ModuleParentBtnClick:function(e){var g=e.next(".cm-sub-menu-area");if(g.is(":visible")){g.hide();e.children(".cm-folder-toggle").removeClass("cm-folder-open");e.children(".cm-folder-toggle").addClass("cm-folder-closed")}else{g.show();e.children(".cm-folder-toggle").removeClass("cm-folder-closed");e.children(".cm-folder-toggle").addClass("cm-folder-open");var f=LOUISE.Core.CBTTree.GetAllModules();var d=g.children(".cm-module-navigation-btn");d.each(function(){LOUISE.UI.Render.Progress.Module(f[$(this).attr("data-moduleIndex")],false)})}},ModuleBtnClick:function(f){if(LOUISE.UI.StopNavUntilLoad){return}if(LOUISE.UI.LastActiveModuleBtn==f){return}var e=parseInt(f.attr("data-parentIndex"),10);var g=parseInt(f.attr("data-moduleIndex"),10);if(!LOUISE.UI.AllowNavForward&&g>LOUISE.Navigation.CurrentModule.Index){return}if(!LOUISE.UI.AllowNavBackward&&g<LOUISE.Navigation.CurrentModule.Index){return}if(LOUISE.Navigation.IsTestIntheWay(LOUISE.Core.CBTTree.Modules.GetAt(g))){return}var d=LOUISE.Core.CBTTree.GetAllModules();LOUISE.Navigation.ToModule(d[g]);var h=Math.random();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.NavigateToUID('"+d[g].UID+"');var check="+h+";}")},ModuleBtnOver:function(d){_moduleBtnHoverTimer=setTimeout(function(){var h=parseInt(d.attr("data-moduleIndex"),10);var e=LOUISE.Core.CBTTree.GetAllModules();var f=e[h];var g=f.ProjectContentPath+"thumbs/"+f.Source.substring(0,f.Source.lastIndexOf("."))+".jpg";$("#module-thumb").attr("src",g)},300)},ModuleBtnOut:function(){clearTimeout(_moduleBtnHoverTimer);$("#module-thumb").stop(false,true).fadeOut(0)},ModuleThumbLoad:function(){$("#module-thumb").css("visibility","visible");$("#module-thumb").stop(false,true).fadeIn("fast")},ModuleThumbError:function(){$("#module-thumb").attr("src",LOUISE.Constants.IMAGE_NOT_FOUND_IMG)},NavBtnMouseOver:function(){$(this).addClass("hover")},NavBtnMouseOut:function(){$(this).removeClass("hover")},NavBtnMouseDown:function(){$(this).addClass("down")},NavBtnMouseUp:function(){$(this).removeClass("down")},NavBtnClick:function(){if(LOUISE.UI.StopNavUntilLoad){return}LOUISE.Flash.InFlashFullscreen=false;LOUISE.Video.InVideoFullscreen=false;var e=$(this).attr("id");if(!e){return}var d=e.indexOf("-prev")!=-1;if(LOUISE.Application.IsRtl){d=!d}if(d){c()}else{b()}},FeedBackBtnMouseOver:function(){$(this).addClass("hover")},FeedBackBtnMouseOut:function(){$(this).removeClass("hover")},FeedBackBtnMouseDown:function(){$(this).addClass("down")},FeedBackBtnMouseUp:function(){$(this).removeClass("down")},FeedBackBtnClick:function(){LOUISE.UI.ShowFeedbackForm()},CloseBtnClick:function(){if(confirm(LOUISE.Application.SystemStrings.EXIT_CONFIRM_MESSAGE)){window.close()}},CloseMouseDown:function(){$("#close-button").addClass("active")},CloseMouseUp:function(){$("#close-button").removeClass("active")},CloseMouseOver:function(){$("#close-button").addClass("hover")},CloseMouseOut:function(){$("#close-button").removeClass("hover")},VideoPosterClick:function(){var d=LOUISE.Navigation.CurrentModule;var e=Math.random();if(LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.windows||LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.html5){LOUISE.Video.Communication.PlayPauseVideo();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Video.Communication.PlayPauseVideo();var check="+e+";}")}else{if(LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.flash){LOUISE.Flash.Communication.Video.PlayPauseVideo();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Flash.Communication.Video.PlayPauseVideo();var check="+e+";}")}}},TextLinkClicked:function(i){if(!i){return}var j=Math.random();switch(i.linktype.toLowerCase()){case"tooltip":return;case"goto":var f=a(i.linkarg);LOUISE.Navigation.NavigateToUID(f);LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.NavigateToUID('"+f+"');var check="+j+";}");break;case"drilldown":var d=parseInt(i.linkarg,10)-1;LOUISE.Navigation.ToDrilldown(d);LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.ToDrilldown("+d+");var check="+j+";}");break;case"url":try{var g=i.linkarg;if(g.indexOf("http://")!==0&&g.indexOf("https://")!==0){g=g.replace("file:","");g=g.replace("_xx.","_"+LOUISE.Application.SelectedLanguage+".");g=g.replace(/\.\.\//g,"./");g=LOUISE.Navigation.CurrentModule.ProjectContentPath.replace("content/","")+g;g=LOUISE.Application.File.Path.ToRoot(g)}window.open(g)}catch(h){throw new Error("File not found\n"+g)}break}},CloseWin:function(d){if(d){if(confirm(LOUISE.Application.SystemStrings.EXIT_CONFIRM_MESSAGE)){window.close();var e=Math.random();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.UI.EventHandlers.CloseWin();var check="+e+";}")}}else{window.close()}},KeyNavigation:function(f){var d=f.keyCode;var g=Math.random();if(d==17){_ctrlDown=false}if(d==16){_shiftDown=false}if(d==18){_altDown=false}if(d==27){this.CloseWin(true)}if((d==78&&_ctrlDown)||(d==73&&_ctrlDown)){if(LOUISE.Navigation.CurrentModule){LOUISE.UI.ShowModuleInfo();f.preventDefault();return}}if(LOUISE.UI.Modal.Visible){return}if(d==77&&(_shiftDown||_ctrlDown)){if(LOUISE.Environment.MultiScreen&&LOUISE.Environment.IsLectureScreen){LOUISE.NavigationProxy.AddMsg("function(){$('#menu-toggle-btn').click();var check="+g+";}")}else{$("#menu-toggle-btn").click()}f.preventDefault();return}if(d==84&&(_shiftDown||_ctrlDown)){if(LOUISE.Environment.MultiScreen&&LOUISE.Environment.IsLectureScreen){LOUISE.NavigationProxy.AddMsg("function(){$('#trainer-txt-toggle-btn').click();var check="+g+";}")}else{$("#trainer-txt-toggle-btn").click()}f.preventDefault();return}if(d==48&&_shiftDown&&_ctrlDown&&_altDown){if(_devKeyCount<3){_devKeyCount++}else{_devKeyCount=0}LOUISE.Application.DevMode=_devKeyCount==3;LOUISE.UI.EnterDevMode(LOUISE.Application.DevMode)}else{_devKeyCount=0}if(d==70&&(_shiftDown||_ctrlDown)){$("#search-box").focus();LOUISE.NavigationProxy.AddMsg("function(){$('#search-box').focus();var check="+g+";}");f.preventDefault();return}if(d==80&&_altDown&&(_shiftDown||_ctrlDown)){this.PenEraseBtnClick($("#pen-btn-toggle"));f.preventDefault();return}if(d==80&&(_shiftDown||_ctrlDown)){this.PenBtnClick($("#pen-btn-toggle"));f.preventDefault();return}if(LOUISE.UI.StopNavUntilLoad){f.preventDefault();return}if(d==32){this.VideoPosterClick();f.preventDefault();return}if(LOUISE.Application.IsRtl){switch(d){case 8:d=13;break;case 13:d=8;break;case 33:d=34;break;case 34:d=33;break}}if((d==34||d==39||d==13)){$("#nav-btn-next").click();f.preventDefault()}else{if((d==33||d==37||d==8)){$("#nav-btn-prev").click();f.preventDefault()}}},KeyDown:function(f){var d=f.keyCode;if(d==16){_shiftDown=true}if(d==17){_ctrlDown=true}if(d==18){_altDown=true}},HtmlClick:function(){LOUISE.UI.Render.Search.HideResults()},SearchBoxFocus:function(){$(document).focus();if($(this).val()===LOUISE.Application.SystemStrings.SEARCH_BOX_DEFAULT_MESSAGE){$(this).val("")}$(this).select();LOUISE.Search.BeginSearch($(this).val(),function(d){LOUISE.UI.Render.Search.Results(d)});$("#search-box-container").addClass("search-active");$("#search-box").addClass("search-active")},SearchBoxKeyUp:function(h){var g=h.keyCode;var f=$("#search-results").children("a");f.removeClass("active");if(g==38){_activeSearchResultIndex-=1;_activeSearchResultIndex=_activeSearchResultIndex<1?1:_activeSearchResultIndex;f.eq(_activeSearchResultIndex-1).addClass("active");return}else{if(g==40){var d=f.length;_activeSearchResultIndex+=1;_activeSearchResultIndex=_activeSearchResultIndex>d?d:_activeSearchResultIndex;f.eq(_activeSearchResultIndex-1).addClass("active");return}else{if(g==13){_enterKeyInSearchBox=true;f.eq(_activeSearchResultIndex-1).click();return}else{if(g==27){$("#search-box").val("");LOUISE.UI.Render.Search.HideResults()}}}}_activeSearchResultIndex=0;LOUISE.Search.BeginSearch($(this).val(),function(e){LOUISE.UI.Render.Search.Results(e)});h.stopPropagation()},SearchResultClick:function(d){LOUISE.Navigation.NavigateToUID(d.attr("data-UID"));var e=Math.random();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Navigation.NavigateToUID('"+d.attr("data-UID")+"');var check="+e+";}")},PenBtnMouseOver:function(d){d.addClass("hover")},PenBtnMouseOut:function(d){d.removeClass("hover")},PenBtnMouseDown:function(d){d.addClass("down")},PenBtnMouseUp:function(d){d.removeClass("down")},PenBtnClick:function(d){if(d.css("display").toLowerCase()=="none"){return}if(!LOUISE.Application.CourseStarted){return}if(d.hasClass("disabled")){return}var e;if(LOUISE.Media.Pen.Visible){d.removeClass("active");LOUISE.UI.ToolTipStrings.SetString(d,LOUISE.Application.SystemStrings.BEGIN_PEN);LOUISE.Media.Pen.Hide();e=Math.random();LOUISE.NavigationProxy.AddMsg("function(){$('#"+d.attr("id")+"').removeClass('active');LOUISE.Media.Pen.Hide();var check="+e+";}")}else{d.addClass("active");LOUISE.UI.ToolTipStrings.SetString(d,LOUISE.Application.SystemStrings.END_PEN);LOUISE.Media.Pen.Show();e=Math.random();LOUISE.NavigationProxy.AddMsg("function(){$('#"+d.attr("id")+"').addClass('active');LOUISE.Media.Pen.Show();var check="+e+";}")}},PenEraseBtnMouseOver:function(d){d.addClass("hover")},PenEraseBtnMouseOut:function(d){d.removeClass("hover")},PenEraseBtnMouseDown:function(d){d.addClass("down")},PenEraseBtnMouseUp:function(d){d.removeClass("down")},PenEraseBtnClick:function(d){if(d.css("display").toLowerCase()=="none"){return}if(!LOUISE.Application.CourseStarted){return}if(d.hasClass("disabled")){return}LOUISE.Media.Pen.Clear();var e=Math.random();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Media.Pen.Clear();var check="+e+";}")},MenuToggleBtnMouseOver:function(d){d.addClass("hover")},MenuToggleBtnMouseOut:function(d){d.removeClass("hover")},MenuToggleBtnMouseDown:function(d){d.addClass("down")},MenuToggleBtnMouseUp:function(d){d.removeClass("down")},MenuToggleBtnClick:function(d){if(d.css("display").toLowerCase()=="none"){return}if(!LOUISE.Application.CourseStarted){return}if(d.hasClass("disabled")){return}LOUISE.Layout.TogglePanels.CourseMenu(!LOUISE.Layout.TogglePanels.CourseMenuVisible);var e=Math.random();LOUISE.NavigationProxy.AddMsg("function(){ LOUISE.Layout.TogglePanels.CourseMenu("+LOUISE.Layout.TogglePanels.CourseMenuVisible+");var check="+e+";}")},MenuToggled:function(g){var d=$("#menu-toggle-btn");if(g.visible){d.addClass("active");LOUISE.UI.ToolTipStrings.SetString(d,LOUISE.Application.SystemStrings.HIDE_COURSE_MENU)}else{d.removeClass("active");LOUISE.UI.ToolTipStrings.SetString(d,LOUISE.Application.SystemStrings.SHOW_COURSE_MENU)}if(!LOUISE.Application.CourseStarted){return}var f=LOUISE.Flash.InFlashFullscreen||LOUISE.Video.InVideoFullscreen;var h=f?"fullscreen":LOUISE.Navigation.CurrentModule.GetProperty("guimode");LOUISE.Layout.GUIMode.Set(h);if(LOUISE.Core.Text.HasText){LOUISE.UI.Render.Slide.MainScreenText({page:LOUISE.Navigation.CurrentPage,length:LOUISE.Navigation.Pages})}if(LOUISE.Layout.GUIMode.AutoHeadline||h.toLowerCase()=="title"){LOUISE.UI.Render.Slide.Title()}if(!LOUISE.Layout.IsTrainerScreen){LOUISE.UI.TextInImages.Resize()}LOUISE.UI.Render.CourseTree.ScrollIntoView(LOUISE.Navigation.CurrentModule,1)},TrainerTxtToggleBtnMouseOver:function(d){d.addClass("hover")},TrainerTxtToggleBtnMouseOut:function(d){d.removeClass("hover")},TrainerTxtToggleBtnMouseDown:function(d){d.addClass("down")},TrainerTxtToggleBtnMouseUp:function(d){d.removeClass("down")},TrainerTxtToggleBtnClick:function(d){if(d.css("display").toLowerCase()=="none"){return}if(!LOUISE.Application.CourseStarted){return}if(d.hasClass("disabled")){return}LOUISE.Layout.TogglePanels.TrainerText(!LOUISE.Layout.TogglePanels.TrainerTextVisible);var e=Math.random();LOUISE.NavigationProxy.AddMsg("function(){ LOUISE.Layout.TogglePanels.TrainerText("+LOUISE.Layout.TogglePanels.TrainerTextVisible+");var check="+e+";}")},TrainerTxtToggled:function(g){var d=$("#trainer-txt-toggle-btn");if(g.visible){d.addClass("active");LOUISE.UI.ToolTipStrings.SetString(d,LOUISE.Application.SystemStrings.HIDE_TRAINER_NOTES)}else{d.removeClass("active");LOUISE.UI.ToolTipStrings.SetString(d,LOUISE.Application.SystemStrings.SHOW_TRAINER_NOTES)}if(!LOUISE.Application.CourseStarted){return}var f=LOUISE.Flash.InFlashFullscreen||LOUISE.Video.InVideoFullscreen;var h=f?"fullscreen":LOUISE.Navigation.CurrentModule.GetProperty("guimode");LOUISE.Layout.GUIMode.Set(h);if(LOUISE.Core.Text.HasText){LOUISE.UI.Render.Slide.MainScreenText({page:LOUISE.Navigation.CurrentPage,length:LOUISE.Navigation.Pages})}if(LOUISE.Layout.GUIMode.AutoHeadline){LOUISE.UI.Render.Slide.Title()}if(!LOUISE.Layout.IsTrainerScreen){LOUISE.UI.TextInImages.Resize()}},ClearSCORMBtnClick:function(){if(confirm("Clear SCORM history?")){LOUISE.SCORM.Clear()}}}})();
LOUISE.UI.NavigationButtons=(function(){(function(){})();return{SetNavigationButtons:function(i){var b=parseInt(LOUISE.Navigation.CurrentModule.GetProperty("hidden"),10)==1;var a=i.page==i.length;var l=LOUISE.Core.CBTTree.IsLastVisible(LOUISE.Navigation.CurrentModule);var c=LOUISE.Core.CBTTree.IsLastVisible(LOUISE.Navigation.CurrentCourse);var h=!(a&&l&&c);var m=parseInt(LOUISE.Navigation.CurrentModule.GetProperty("allownavnext"),10)!=0;LOUISE.UI.AllowNavForward=(h&&m)||b;if(!LOUISE.UI.AllowNavForward){this.DisableForwardNavigation()}else{this.EnableForwardNavigation()}var g=i.page==0;var f=LOUISE.Core.CBTTree.IsFirstVisible(LOUISE.Navigation.CurrentModule);var k=LOUISE.Core.CBTTree.IsFirstVisible(LOUISE.Navigation.CurrentCourse);var j=!(g&&f&&k);var d=parseInt(LOUISE.Navigation.CurrentModule.GetProperty("allownavprev"),10)!=0;LOUISE.UI.AllowNavBackward=(j&&d)||b;if(!LOUISE.UI.AllowNavBackward){this.DisableBackNavigation()}else{this.EnableBackNavigation()}},SetDrilldownNavigationButtons:function(a){if(a.historyPosition<a.history.length&&!LOUISE.UI.AllowForward){this.EnableForwardNavigation()}if(a.historyPosition>-1&&!LOUISE.UI.AllowBackWard){this.EnableBackNavigation()}},EnableForwardNavigation:function(){if(LOUISE.Application.IsRtl){$("#nav-btn-prev").removeClass("disabled")}else{$("#nav-btn-next").removeClass("disabled")}},DisableForwardNavigation:function(){if(LOUISE.Application.DevMode){return}if(LOUISE.Application.IsRtl){$("#nav-btn-prev").addClass("disabled")}else{$("#nav-btn-next").addClass("disabled")}},EnableBackNavigation:function(){if(LOUISE.Application.IsRtl){$("#nav-btn-next").removeClass("disabled")}else{$("#nav-btn-prev").removeClass("disabled")}},DisableBackNavigation:function(){if(LOUISE.Application.DevMode){return}if(LOUISE.Application.IsRtl){$("#nav-btn-next").addClass("disabled")}else{$("#nav-btn-prev").addClass("disabled")}}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.UI.Render=(function(){(function(){})();return{}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.UI.Render.CourseTree=(function(){var h=false;var d=[];var b=0;var f=0;(function(){})();function a(n,j){if(n.Children.Count()>0){j.push('<ul class="cm-sub-menu-area">');for(var m=0;m<n.Children.Count();m++){var l=n.Children.GetAt(m);if(l.CBTItemType==="module"&&parseInt(l.GetProperty("hidden"),10)!=1){d.push(c(n,l))}else{if(l.CBTItemType==="course"&&parseInt(l.GetProperty("hidden"),10)!=1){d.push(e(n,l));if(l.Children&&l.Children.Count()>0){var o="course_btn_";o+=l.GetCourseParent().Index;o+="_"+l.Index;a(l,j)}}else{if(l.CBTItemType==="header"){d.push(g(n,l));if(l.Children&&l.Children.Count()>0){var k="header_btn_";k+=l.GetCourseParent().Index;k+="_"+l.Index;a(l,j)}}}}}d.push("</ul>")}}function e(j,i){if(i.ID===-1){return""}var k=LOUISE.Application.IsRtl?" cm-rtl":"";var o=[];var m=0;var n=(i.Depth+f)*LOUISE.Constants.COURSE_TREE_SETTINGS.inset;var l=LOUISE.UI.Render.CourseTree.ToDrawMainCBTName()?"cm-cbt-icon":"cm-course-icon";o[m++]='<li title="';o[m++]=i.Label;o[m++]='" id="course_btn_'+i.Index+'"';o[m++]='" data-index="'+i.Index+'"';o[m++]='" data-parentIndex="'+j.Index+'"';o[m++]='" data-depth="'+i.Depth+'"';o[m++]='" class="cm-row cm-course-navigation-btn">';o[m++]='<div class="cm-spacer'+k+'" style="padding-left:'+n+'px;"></div>';o[m++]='<div class="cm-folder-toggle cm-folder-open'+k+'"></div>';o[m++]='<div class="cm-icon '+l+k+'"></div>';o[m++]='<div class="cm-text cm-course-text'+k+'">';o[m++]=i.Label;o[m++]="</div></li>";return o.join("")}function g(j,q){var p=true;for(var l=0;l<q.Children.Count();l++){if(parseInt(q.Children.GetAt(l).GetProperty("hidden"),10)!=1){p=false;break}}if(p){return}var k=LOUISE.Application.IsRtl?" cm-rtl":"";var o=[];var m=0;var n=(q.Depth+f)*LOUISE.Constants.COURSE_TREE_SETTINGS.inset;o[m++]='<li title="';o[m++]=q.Label;o[m++]='" id="header_btn_'+q.Index+'"';o[m++]='" data-index="'+q.Index+'"';o[m++]='" data-parentIndex="'+j.Index+'"';o[m++]='" data-depth="'+q.Depth+'"';o[m++]='" class="cm-row cm-header-navigation-btn">';o[m++]='<div class="cm-spacer'+k+'" style="padding-left:'+n+'px;"></div>';o[m++]='<div class="cm-folder-toggle cm-folder-open'+k+'"></div>';o[m++]='<div class="cm-icon cm-header-icon'+k+'"></div>';o[m++]='<div class="cm-text cm-header-text'+k+'">';o[m++]=q.Label;o[m++]="</div></li>";return o.join("")}function c(i,k){if(k.Type=="end"){return""}var j=LOUISE.Application.IsRtl?" cm-rtl":"";var n=[];var l=0;var m=(k.Depth+f)*LOUISE.Constants.COURSE_TREE_SETTINGS.inset;n[l++]='<li title="';n[l++]=k.Description;n[l++]='" id="module_btn_'+k.Index+'"';n[l++]='" data-index="'+k.Index+'"';n[l++]='" data-parentIndex="'+i.Index+'"';n[l++]='" data-moduleIndex="'+k.Index+'"';n[l++]='" data-depth="'+k.Depth+'"';n[l++]='" class="cm-row cm-module-navigation-btn">';n[l++]='<div class="cm-spacer'+j+'" style="padding-left:'+m+'px;"></div>';n[l++]='<div class="cm-folder-toggle'+j+'"></div>';n[l++]='<div class="cm-icon cm-progress-container'+j+'">';n[l++]='<div id="module_prgress_bar_'+k.Index+'" class="cm-icon cm-progress-color'+j+'"></div>';n[l++]='<div class="cm-icon cm-progress-cover'+j+'">';n[l++]="</div>";n[l++]="</div>";n[l++]="</div>";n[l++]='<div class="cm-text cm-module-text'+j+'">';n[l++]=k.Description;n[l++]="</div></li>";return n.join("")}return{MenuRendered:false,ToDrawMainCBTName:function(){if(h){return h}var i=LOUISE.Core.CBTTree.Root.Children.GetAt(0);if(i.Label==""){i.Label=LOUISE.Core.CBTTree.CBTTitle}h=i&&LOUISE.Core.CBTTree.Root.Children.Count()==1&&i.Label.toLowerCase()==LOUISE.Core.CBTTree.CBTTitle.toLowerCase();return h},Menu:function(k){var i=k;if(!i){return}d=[];d.push('<ul id="cm-container">');var j=LOUISE.Application.IsRtl?" cm-rtl":"";if(!this.ToDrawMainCBTName()){d.push('<li class="cm-row cm-cbt-navigation-btn">');d.push('<div class="cm-folder-toggle cm-folder-open'+j+'">');d.push('</div><div class="cm-icon cm-cbt-icon'+j+'"></div>');d.push('<div class="cm-text cm-cbt-text">'+LOUISE.Core.CBTTree.CBTTitle+"</div></li>");f=1}a(LOUISE.Core.CBTTree.Root,d);d.push('<li class="last-item-shade"></li>');d.push("</ul>");$("#panel_course_sub_menu").html(d.join(""));$(".cm-cbt-navigation-btn").click(function(){LOUISE.UI.EventHandlers.ModuleParentBtnClick($(this))});$(".cm-course-navigation-btn").click(function(){LOUISE.UI.EventHandlers.ModuleParentBtnClick($(this))});$(".cm-header-navigation-btn").click(function(){LOUISE.UI.EventHandlers.ModuleParentBtnClick($(this))});$(".cm-module-navigation-btn").click(function(){LOUISE.UI.EventHandlers.ModuleBtnClick($(this))});$(".cm-module-navigation-btn").hover(function(){LOUISE.UI.EventHandlers.ModuleBtnOver($(this))},function(){LOUISE.UI.EventHandlers.ModuleBtnOut()});this.MenuRendered=true},OpenParent:function(j){var k=j.GetParent();if(k){var i=null;if(k==LOUISE.Core.CBTTree.Root){i=$(".cm-cbt-navigation-btn").first()}else{i=k.type=="header"?$("#header_btn_"+k.Index):$("#course_btn_"+k.Index)}if(!i.next(".cm-sub-menu-area").is(":visible")){i.click()}}},ScrollIntoView:function(m,l){var r=$("#cm-container").find("li[data-moduleIndex="+m.Index+"]");if(!r.length){return}var p=l||"slow";var n=$("#panel_course_sub_menu");var q=r.offset().top-n.offset().top;var k=r.outerHeight();var i=n.height()-(r.outerHeight()*5);var o=0;if(q+r.outerHeight()>=i){o=q+r.outerHeight();o-=i;o+=k}else{if(q<=0){o=q;o-=r.outerHeight();o-=k}}if(o!=0){var j=$("#panel_course_sub_menu").scrollTop()+o;$("#panel_course_sub_menu").stop(true,true);$("#panel_course_sub_menu").animate({scrollTop:j},p)}}}})();
LOUISE.UI.Render.NavigationResult=(function(){_newModule=false;(function(){})();function a(h){var i=LOUISE.UI.Render.NavigationResult;_newModule=true;var c=parseFloat(h.GetProperty("hidden"),10)==1;var f=h.GetCourseParent();var d=h.GetHeaderParent();if(!c||(c&&!LOUISE.UI.Render.CourseTree.MenuRendered)){i.Course(f);setTimeout(function(){if(d){i.Header(d)}},0)}LOUISE.Media.Load(h);LOUISE.UI.Render.Slide.BackgroundColor(h);$("#custom-slide-indicator").hide();var j=parseFloat(h.GetProperty("lite"),10)==1;if(j){$("#custom-slide-indicator").show().fadeTo(0,0.8)}var b=LOUISE.Media.LoadedVideo==LOUISE.Media.VideoType.windows;if(b){$("#pen-btn-toggle").addClass("disabled");$("#pen-clear-btn").addClass("disabled");$("#pen-btn-toggle").removeClass("active");$("#pen-clear-btn").removeClass("active");LOUISE.Media.Pen.Hide()}else{$("#pen-btn-toggle").removeClass("disabled");$("#pen-clear-btn").removeClass("disabled")}if(c){return}if(!LOUISE.Navigation.InSlideShow){LOUISE.UI.Render.CourseTree.ScrollIntoView(h)}LOUISE.UI.Render.Progress.BreadCrumbs();var e=h.Index;var g=f.Index;if(LOUISE.UI.LastActiveModuleBtn){LOUISE.UI.LastActiveModuleBtn.removeClass("btn-active");LOUISE.UI.LastActiveModuleBtn.find(".cm-progress-color").first().removeClass("active")}LOUISE.UI.LastActiveModuleBtn=$("#module_btn_"+e);LOUISE.UI.LastActiveModuleBtn.addClass("btn-active");LOUISE.UI.LastActiveModuleBtn.find(".cm-progress-color").first().addClass("active")}return{Course:function(d,c){if(!LOUISE.UI.Render.CourseTree.MenuRendered){LOUISE.UI.Render.CourseTree.Menu(d)}LOUISE.UI.Render.CourseTree.OpenParent(d);_lastOpenCourse=d;var b=d.Index;var e=$("#course_btn_"+b);if(LOUISE.UI.LastActiveCourseBtn){LOUISE.UI.LastActiveCourseBtn.removeClass("btn-active")}e.addClass("btn-active");LOUISE.UI.LastActiveCourseBtn=e;if(!e.next(".cm-sub-menu-area").is(":visible")){e.click()}},Header:function(c){LOUISE.UI.Render.CourseTree.OpenParent(c);var b=c.Index;var d=$("#header_btn_"+b);if(LOUISE.UI.LastActiveHeaderBtn){LOUISE.UI.LastActiveHeaderBtn.removeClass("btn-active")}d.addClass("btn-active");LOUISE.UI.LastActiveHeaderBtn=d;if(!d.next(".cm-sub-menu-area").is(":visible")){d.click()}},Module:function(b){LOUISE.UI.Preloader.Show(function(){a(b)})},Page:function(d){if(_newModule){_newModule=false;LOUISE.UI.TextInImages.Resize()}var c=LOUISE.UI.Print.PrintFrame?"#print":d.page;var b=LOUISE.UI.Print.PrintFrame?-1:d.page;LOUISE.UI.Render.Progress.Module(LOUISE.Navigation.CurrentModule,false);LOUISE.UI.TextInImages.ShowForPage(b);if(LOUISE.UI.Print.PrintFrame){LOUISE.Layout.GUIMode.Set("fullscreen");LOUISE.UI.TextInImages.Resize()}if(LOUISE.Navigation.CurrentModule.Type=="swf"){LOUISE.Navigation.SWF.ToPage(c)}LOUISE.UI.NavigationButtons.SetNavigationButtons(d)}}})();
LOUISE.UI.Render.Progress=(function(){_moduleInicatorMaxWidth=10;_visibleModuleCount=null;(function(){})();function a(b){$("#progress-bar").stop(true,true);var g=$("#progress-bar-Bg").width();var d="";var c=Math.min(b.value/b.max,1);var e=Math.round(g*c);if(b.type=="int"){d=b.value+" / "+b.max}else{d=Math.round(c*100)+"%"}if(LOUISE.Application.IsRtl){$("#progress-bar").animate({clip:"rect(0px,"+g+"px,21px,"+(g-e)+"px)"},300)}else{$("#progress-bar").animate({clip:"rect(0px,"+e+"px,21px,0px)"},300)}$("#progress-bar").text(d);$("#progress-bar-Bg").text(d);var f=LOUISE.Application.SystemStrings.SLIDE+" "+(LOUISE.Navigation.CurrentModule.ViewIndex+1)+" "+LOUISE.Application.SystemStrings.OF+" "+(_visibleModuleCount);if(LOUISE.Navigation.Pages>0){f+=" - "+LOUISE.Application.SystemStrings.PAGE+" "+(LOUISE.Navigation.CurrentPage+1)+" "+LOUISE.Application.SystemStrings.OF+" "+(LOUISE.Navigation.Pages+1)}$("#nav-text-indicator").text(f).attr("title",$("#nav-text-indicator").text())}return{Module:function(e,b){if(!e){return}var d=$("#module_prgress_bar_"+e.Index);var c=e.Progress();var f=_moduleInicatorMaxWidth*c;if(b){d.animate({width:f.toString()},300)}else{d.css("width",f.toString()+"px")}},CBT:function(d){if(!LOUISE.Navigation.CurrentModule||parseInt(LOUISE.Navigation.CurrentModule.GetProperty("hidden"),10)==1||parseInt(LOUISE.Navigation.CurrentModule.GetCourseParent().GetProperty("hidden"),10)==1||LOUISE.Navigation.CurrentModule.ID===-1){return}var f=LOUISE.Navigation.VisitedModules.length;for(var c=0;c<f;c++){if(parseInt(LOUISE.Navigation.VisitedModules[c].GetProperty("hidden"),10)==1||!LOUISE.Navigation.VisitedModules[c].IsDone()){f-=1}}var b=Math.max(0,f);var e=LOUISE.Navigation.CurrentModule.Progress();b=e<1?b+e:b;_visibleModuleCount=_visibleModuleCount||LOUISE.Core.CBTTree.Modules.Count(true);if(d){_visibleModuleCount=LOUISE.Core.CBTTree.Modules.Count(true)}a({type:"percent",value:b,max:_visibleModuleCount});if(d){for(var c=0;c<LOUISE.Navigation.VisitedModules.length;c++){LOUISE.UI.Render.Progress.Module(LOUISE.Navigation.VisitedModules[c],false)}}},ProgressBarOverride:function(d,b,c){a({type:d,value:b,max:c})},BreadCrumbs:function(){var c=LOUISE.Navigation.CurrentModule;var b=c.Description;while(c.GetParent){c=c.GetParent();if(c==LOUISE.Core.CBTTree.Root){break}var d=c==LOUISE.Core.CBTTree.Root.Children.GetAt(0)&&LOUISE.UI.Render.CourseTree.ToDrawMainCBTName();if(c.Label.length>0&&!d){b=c.Label+LOUISE.Constants.BREAD_CRUMB_SEPARATOR+b}}$("#bread-crumbs").html(unescape(b))}}})();
LOUISE.UI.Render.Slide=(function(){var a;(function(){})();return{LanguageMenu:function(d){if(!d||!d.length){return}$("#custom-slide-indicator").fadeTo(0,0);var c=0;var k=[];k[c++]='<ul id="language_menu">';for(var f=0;f<d.length;f++){k[c++]='<li title="'+d[f].longname+'" class="langSelectBtn" ';k[c++]='id="lang_btn_'+d[f].shortname+'">';k[c++]='<img src="resources/Images/flags/'+d[f].shortname+'.png" width="48" height="48"><br/>';k[c++]=d[f].longname;k[c++]="</li>"}k[c++]="</ul>";$("#panel_content_media").html(k.join(""));var e=$("#panel_content_media").innerWidth();var h=$("#panel_content_media").innerHeight();var j=$("#language_menu").outerWidth();var b=$("#language_menu").outerHeight();var g=((h-b)/2);$("#language_menu").css("top",g+"px");$("#language_menu").css("left",((e-j)/2)+"px");$(".langSelectBtn").click(function(){LOUISE.UI.EventHandlers.LangSelectBtnClick($(this))});$(".langSelectBtn").mouseover(function(){LOUISE.UI.EventHandlers.LangSelectBtnOver($(this))});$(".langSelectBtn").mouseleave(function(){LOUISE.UI.EventHandlers.LangSelectBtnOut($(this))});$("body").css("cursor","default")},Title:function(){if(LOUISE.Layout.GUIMode.AutoHeadline||LOUISE.Layout.GUIMode.CurrentGUIMode.toLowerCase()=="title"){var c=$("#panel_slide_title");LOUISE.Core.Text.ToPage(0,LOUISE.Core.Text.TypeMapping.Student_1,true,c);var f=parseInt(LOUISE.Navigation.CurrentModule.GetProperty("aH_src"),10)==1;if(f&&LOUISE.Core.Text.HasText){var h=$("#"+LOUISE.Core.Text.TypeMapping.Student_2+"_1");var e="";h.find("span").each(function(){var k=$(this).html();var l=k.toLowerCase().indexOf("<br");if(l!=-1){e+=k.substring(0,l);return false}else{e+=k}});if(e.length>0){b.text(e)}}var i=LOUISE.Navigation.CurrentModule.GetProperty("aH_align").toLowerCase();var g=i=="left"?LOUISE.Constants.TEXT_PADDING.left:0;var d=i=="right"?LOUISE.Constants.TEXT_PADDING.right:0;LOUISE.Layout.Text.SetPadding({top:0,left:g,bottom:0,right:d},c);var b=c.find(".inner_text_container").first();var j=LOUISE.Navigation.CurrentModule.GetProperty("aH_fontSize");b.attr("data-orgSize",j);b.css({"font-family":LOUISE.Navigation.CurrentModule.GetProperty("ah_fontfamily"),"font-style":LOUISE.Navigation.CurrentModule.GetProperty("aH_fontStyle"),"font-size":j+"pt","font-Weight":LOUISE.Navigation.CurrentModule.GetProperty("aH_fontWeight"),"text-decoration":LOUISE.Navigation.CurrentModule.GetProperty("aH_textDecoration"),"text-transform":LOUISE.Navigation.CurrentModule.GetProperty("aH_textTransform"),color:"#"+LOUISE.Navigation.CurrentModule.GetProperty("aH_color")});LOUISE.Layout.Text.ScaleToOrigin(c);LOUISE.Layout.Text.Align(i,"middle",c,true)}},TrainerText:function(){var b=$("#panel_content_trainer_text");LOUISE.Core.Text.ToPage(0,LOUISE.Core.Text.TypeMapping.Trainer_1,false,b);LOUISE.Core.Text.AddToPage(0,LOUISE.Core.Text.TypeMapping.Trainer_2,false,b);LOUISE.Core.Text.AddToPage(0,LOUISE.Core.Text.TypeMapping.Trainer_3,false,b);LOUISE.Layout.Text.SetPadding({top:20,left:20,bottom:20,right:20},b);LOUISE.Layout.Text.Align("left","top",b)},MainScreenText:function(b){LOUISE.Core.Text.ToPage(b.page);LOUISE.Layout.Text.SetPadding();LOUISE.Layout.Text.ScaleToOrigin();LOUISE.Layout.Text.Align(LOUISE.Layout.Text.TextAlign,LOUISE.Layout.Text.TextVerticalAlign,null,true)},BackgroundColor:function(b,e){var d;var f=LOUISE.Media.LoadedVideo!=LOUISE.Media.VideoType.none;if(LOUISE.Environment.MultiScreen&&!LOUISE.Environment.IsLectureScreen){d="ffffff"}else{if(f&&e){d=b.GetProperty("flvbgcolor")||"000000"}else{d=b.GetProperty("bgcolor")||"ffffff"}}LOUISE.UI.ModuleBackgroundColor=d;$("#panel_content_media").css("background-color","#"+d);var c=$("#mediaObject").length>0&&$("#mediaObject")[0].contentWindow;if(c){setTimeout(function(){try{$("body",c.document).css("background-color","#"+d)}catch(g){}},1)}},ModuleInfo:function(){var c=window.location.href;var e=c.split("/");var g=e.slice(0,e.length-1).join("/");var f='<b>MODULE INFORMATION</b><br/><hr style="border:0px solid;border-top:solid 1px;height:6px;color:#999;"/><b>Path:</b> <a href="'+g+'" title="'+g+'">Open project folder</a><br/><b>File name:</b> '+LOUISE.Navigation.CurrentModule.Source+"<br/><b>UID:</b> "+LOUISE.Navigation.CurrentModule.UID+"<br/><b>ID:</b> "+LOUISE.Navigation.CurrentModule.ID+"<br/><b>index:</b> "+LOUISE.Navigation.CurrentModule.Index+"<br/><b>Parent object:</b> "+LOUISE.Navigation.CurrentModule.GetParent().Label+"<br/><b>Parent course:</b> "+LOUISE.Navigation.CurrentModule.GetCourseParent().Label+'<br/><br/><b>MODULE PROPERTIES</b><br/><hr style="border:0px solid;border-top:solid 1px;height:6px;color:#999;"/>';var d=LOUISE.Navigation.CurrentModule.Properties;for(var b in d){f+="<b>"+b+":</b> "+d[b]+"<br/>"}f+='<br/><b>COURSE PROPERTIES</b><br/><hr style="border:0px solid;border-top:solid 1px;height:6px;color:#999;"/>';d=LOUISE.Navigation.CurrentModule.GetCourseParent().Properties;for(var b in d){f+="<b>"+b+":</b> "+d[b]+"<br/>"}f+='<br/><b>ENVIRONMENT PROPERTIES</b><br/><hr style="border:0px solid;border-top:solid 1px;height:6px;color:#999;"/><b>Screen dimensions:</b>'+screen.width+"px / "+screen.height+"px<br/><b>Available screen dimensions:</b>"+screen.availWidth+"px / "+screen.availHeight+"px<br/><b>Document size:</b> "+$("body").innerWidth()+"px / "+$("body").innerHeight()+"px<br/><b>Media panel size:</b> "+$("#panel_content_media").innerWidth()+"px / "+$("#panel_content_media").innerHeight()+"px<br/>";f+="<br/><br/>";return f},FeedbackForm:function(){var b='<b>Leave feedback</b><hr style="border:0px solid;border-top:solid 1px;height:6px;color:#999;"/><label for="ticket-message-txt">Suggested change</label><br/><textarea name="ticket-message-txt" maxlength="1000" style="width:100%; height:100px;" id="ticket-change-txt"></textarea><br/><br/><label for="ticket-reason-txt">Reason for change</label><br/><textarea name="ticket-reason-txt" maxlength="1000" style="width:100%; height:60px;" id="ticket-reason-txt"></textarea><br/><br/><label for="ticket-name-txt">Your name</label><br/><input type="text" style="width:100%" name="ticket-name-txt" id="ticket-name-txt" value=""></input><hr style="border:0px solid;border-top:solid 1px;height:6px;color:#999;"/><input type="button" name="ticket-submit-btn" id="ticket-submit-btn" value="Save ticket" />';return b},FeedbackResult:function(){var b='<b>Feedback ticket saved</b><p>Thank you! Your feedback has been saved in a ticket as: <b>{ticketName}</b></p><p>Your ticket <b>have not</b> been submitted to any central server, you need to take apropiate action to submit your ticket.</p><a href="file:///{ticketPath}">Click here to view your ticket</a>';return b},DevMode:function(b){if(!a){var c="";c+="<strong>Developer panel</strong><br/><br/>";c+='<input type="button" style="border:1px solid;" id="clear-SCORM-button" value="clear SCORM history" />';c+="<br/><br/>";c+='<input type="button" style="border:1px solid;" id="set-filter-button" value="Set filter:" />';c+='<input type="text" style="border:1px solid;" id="dev-filter-string" value="" />';a=$("<div/>").attr("id","dev-message").html(c);a.css({position:"absolute",top:"10px",right:"10px",padding:"6px","background-color":"#ffffe1",border:"3px solid #eba600",font:"normal 10pt Arial, Sans-serif","z-index":60000});$("body").append(a);$("#clear-SCORM-button").click(LOUISE.UI.EventHandlers.ClearSCORMBtnClick);$("#set-filter-button").click(function(){LOUISE.Navigation.ApplyFilter($("#dev-filter-string").val())});a.fadeOut(0)}if(b){a.fadeIn(300)}else{a.fadeOut(300)}}}})();
LOUISE.UI.Render.Search=(function(){(function(){})();return{Results:function(f){var h=$("#search-bar");if(!f||f.length<1){$("#search-results").hide();return}var d=h.position();var g=h.outerHeight();var c=h.outerWidth();$("#search-results").css("width",(c)+"px").css("top",d.top+g-1).css("left",d.left).show();var b="";for(var a=0;a<f.length;a++){b+='<a href="#" class="search-result-link" data-UID="'+f[a][2]+'">'+f[a][1]+"</a>"}$("#search-results").html(b);$(".search-result-link").click(function(){LOUISE.UI.EventHandlers.SearchResultClick($(this))})},HideResults:function(){$("#search-box").blur();$("#search-results").hide();$("#search-box-container").removeClass("search-active");$("#search-box").removeClass("search-active");var a=$("#search-box").val();if(a===""||a===LOUISE.Constants.SEARCH_BOX_DEFAULT_MESSAGE){$("#search-box").val(LOUISE.Constants.SEARCH_BOX_DEFAULT_MESSAGE)}}}})();
LOUISE.UI.ToolTipStrings=(function(){(function(){})();return{SetAllStrings:function(){this.SetString($("#trainer-txt-toggle-btn"),LOUISE.Application.SystemStrings.SHOW_TRAINER_NOTES);this.SetString($("#menu-toggle-btn"),LOUISE.Application.SystemStrings.SHOW_COURSE_MENU);this.SetString($("#pen-clear-btn"),LOUISE.Application.SystemStrings.CLEAR_PEN);this.SetString($("#pen-btn-toggle"),LOUISE.Application.SystemStrings.BEGIN_PEN);this.SetString($("#nav-btn-prev"),LOUISE.Application.SystemStrings.NAVIGATE_BACKWARD);this.SetString($("#nav-btn-next"),LOUISE.Application.SystemStrings.NAVIGATE_FORWARD)},SetString:function(b,c){var a=$("<div></div>");a.html(c);b.attr("title",a.text());a=null}}})();
LOUISE.UI.TextInImages=(function(){_mediaDOMObj=null;_editorRect=null;_playerRect=null;_currentModule=null;(function(){})();function b(e){if(!e){return}var l=e.GetProperty("width")||550;var h=e.GetProperty("height")||400;var f=880;var j=660;var g=l/h;var m=f/j;var k={top:0,left:0,width:l,height:h};var i=parseInt(e.GetProperty("stretch"),10)==0&&l<f&&h<j;if(!i){if(g<=m){k.height=j;k.width=k.height*g}else{k.width=f;k.height=k.width/g}}k.left=(f-k.width)/2;k.top=(j-k.height)/2;return k}function a(f){if(!f){return}var j=f.GetProperty("width")||550;var i=f.GetProperty("height")||550;var l=_mediaDOMObj.outerWidth();var g=_mediaDOMObj.outerHeight();var k=j/i;var h=l/g;var e={top:0,left:0,width:0,height:0};if(k<=h){e.height=g;e.width=e.height*k}else{e.width=l;e.height=e.width/k}e.left=(l-e.width)/2;e.top=(g-e.height)/2;return e}function c(i,e){var l=_playerRect.width/_editorRect.width;var j;j=e.Left-_editorRect.left;j*=l;j+=_playerRect.left;j+=_mediaDOMObj.position().left;var h=_mediaDOMObj.position().top;var g;g=e.Top-_editorRect.top;g*=l;g+=_playerRect.top;g+=h;i.css({top:g+"px",left:j+"px",width:(e.Width*l)+"px",height:(e.Height*l)+"px"});var f=$(".txtInImg_text:first",i);$.each(f.find("*"),function(){var m=$(this).attr("data-orgSize");m=parseInt(m,10)*l;$(this).css("font-size",m+"pt")});if(f.outerHeight()>i.outerHeight()){d(i)}switch(e.Valign){case"top":f.css("top","0px");break;case"middle":var k;k=i.outerHeight();k-=f.outerHeight();k/=2;f.css("top",k+"px");break;case"bottom":var k;k=i.outerHeight();k-=f.outerHeight();f.css("top",k+"px");break}f.css("text-align",f.children("span").first().css("text-align"))}function d(g,e){var h=e||0;var f=$(".txtInImg_text:first",g);if(h>100){return}$.each(f.find("*"),function(){var i=$(this).css("font-size");if(i){i=parseInt(i,10);i*=0.9;i=i<1?1:i;$(this).css("font-size",i+"px")}});if(f.outerHeight()>g.outerHeight()){d(g,++h)}}return{Add:function(k){for(var h=-1;h<LOUISE.Core.Text.TextInImages.length;h++){if(!LOUISE.Core.Text.TextInImages[h]){continue}for(var f=0;f<LOUISE.Core.Text.TextInImages[h].length;f++){var l=LOUISE.Core.Text.TextInImages[h][f];var g=$('<div class="txtInImg" id="textInImageDiv_'+l.Instance+'"></div>');g.css({position:"absolute",top:l.Top+"px",left:l.Left+"px",width:l.Width+"px",height:l.Height+"px",visibility:"hidden",overflow:"visible"});var e=$('<div class="txtInImg_text" id="textInImageDiv_'+l.Instance+'_text"></div>');e.css({position:"relative",height:"auto",width:"auto",margin:"0px 1px","word-wrap":"break-word"});if(LOUISE.Application.IsRtl){e.addClass("rtl")}e.html(l.Html);LOUISE.Core.Text.SwapTextAlign(e);g.append(e);$("#panel_content_media").append(g)}}_mediaDOMObj=$("#mediaObject");_currentModule=k},Remove:function(){$(".txtInImg").remove()},Resize:function(){if(!_currentModule){return}_editorRect=b(_currentModule);_playerRect=a(_currentModule);for(var f=-1;f<LOUISE.Core.Text.TextInImages.length;f++){if(!LOUISE.Core.Text.TextInImages[f]){continue}for(var e=0;e<LOUISE.Core.Text.TextInImages[f].length;e++){var h=LOUISE.Core.Text.TextInImages[f][e];var g=$("#textInImageDiv_"+h.Instance);c(g,h)}}},ShowForPage:function(e){$(".txtInImg").css("visibility","hidden");if(e<-1||e>LOUISE.Core.Text.TextInImages.length){return}if(!LOUISE.Core.Text.TextInImages[e]){return}if(parseInt(LOUISE.Navigation.CurrentModule.GetProperty("txtInImgVisible"))==0){return}for(var f=0;f<LOUISE.Core.Text.TextInImages[e].length;f++){$("#textInImageDiv_"+LOUISE.Core.Text.TextInImages[e][f].Instance).css("visibility","visible")}},ShowInstance:function(e){$("#textInImageDiv_"+e).css("visibility","visible")},HideInstance:function(e){$("#textInImageDiv_"+e).css("visibility","hidden")}}})();
LOUISE.UI.Print=(function(){(function(){})();return{PrintFrame:false,Init:function(){LOUISE.Constants.BOTTOM_CONTAINER_HEIGHT=0;LOUISE.Constants.TOP_CONTAINER_HEIGHT=0;LOUISE.Constants.COURSE_TREE_SETTINGS.width=0;LOUISE.Core.Events.Add(LOUISE.Layout.ON_DEFAULT_LAYOUT,function(a){$("#panel_middle_container").height($(window).height()-LOUISE.Constants.BOTTOM_CONTAINER_HEIGHT-$("#panel_top_container").outerHeight());$("#panel_bottom_container").height(LOUISE.Constants.BOTTOM_CONTAINER_HEIGHT);$("#panel_left_middle_container").html("");$("#drop-shade-top").hide();$("#drop-shade-top").hide()})}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.SCORM=(function(){var m=false;var r=null;var c={SCORM_1_2:"SCORM Version 1.2",SCORM_2004:"SCORM Version 2004"};var q=null;var d=null;var h={};(function(){})();function l(z){z=Math.max(z,0);var x="P";var u=z;var w=Math.floor(u/3155760000);u-=w*3155760000;var y=Math.floor(u/262980000);u-=y*262980000;var v=Math.floor(u/8640000);u-=v*8640000;var t=Math.floor(u/360000);u-=t*360000;var s=Math.floor(u/6000);u-=s*6000;if(w>0){x+=w+"Y"}if(y>0){x+=y+"M"}if(v>0){x+=v+"D"}if((t>0)||(s>0)||(u>0)){x+="T";if(t>0){x+=t+"H"}if(s>0){x+=s+"M"}if(u>0){x+=u/100+"S"}}if(x=="P"){x="PT0H0M0S"}return x}function g(z){var x="";var y=new Date();y.setTime(z);var w="000"+Math.floor(z/3600000);var t="0"+y.getMinutes();var v="0"+y.getSeconds();var u="0"+Math.round(y.getMilliseconds()/10);x=w.substr(w.length-4)+":"+t.substr(t.length-2)+":";x+=v.substr(v.length-2)+"."+u.substr(u.length-2);return x}function k(){return q==c.SCORM_2004}function j(s){while((s.API==null)&&(s.parent!=null)&&(s.parent!=s)){s=s.parent}if(!s.API){return}d=s.API;q=c.SCORM_1_2}function e(s){while(!s.API_1484_11&&s.parent&&s.parent!=s){s=s.parent}if(!s.API_1484_11){return}d=s.API_1484_11;q=c.SCORM_2004}function p(s){LOUISE.SCORM.MAX_SCORE=LOUISE.Settings.MAX_SCORE||0;LOUISE.SCORM.PASSING_SCORE=LOUISE.Settings.PASSING_SCORE||0;e(s);if(!q&&s.opener){e(s.opener)}if(!d){j(s);if(!d&&s.opener){j(s.opener)}}if(d==null){return false}if(q==c.SCORM_1_2){d.LMSInitialize("")}else{if(q==c.SCORM_2004){d.Initialize("")}}return true}function b(){if(!d){return}if(q==c.SCORM_1_2){d.LMSFinish("")}else{if(q==c.SCORM_2004){d.Terminate("")}}d=null}function n(){var s=0;for(key in h){s+=h[key]}return s}function f(t,s){if(!d){return}if(q==c.SCORM_1_2){d.LMSSetValue(t,s.toString())}else{if(q==c.SCORM_2004){d.SetValue(t,s.toString())}}}function a(s){if(!d){return""}if(q==c.SCORM_1_2){return d.LMSGetValue(s)}else{if(q==c.SCORM_2004){return d.GetValue(s)}}return""}function o(){var s=k()?"cmi.completion_status":"cmi.core.lesson_status";if(a(s)!="completed"){f(s,"completed");i();setTimeout(o,3000)}}function i(){if(!d){return""}var s=false;if(q==c.SCORM_1_2){s=d.LMSCommit("")}else{if(q==c.SCORM_2004){s=d.Commit("")}}if(!s){alert("Error: SCO lost contact with the LMS!\nNo progress will be saved. Please close the course and restart the LMS")}}return{MAX_SCORE:0,PASSING_SCORE:0,BEST_SCORE:0,ScormHistory:"",StartLMS:function(){var w=p(window);if(!w){return}m=true;var t=k()?"cmi.exit":"cmi.core.exit";f(t,"suspend");this.ScormHistory=a("cmi.suspend_data");var v=k()?"cmi.completion_status":"cmi.core.lesson_status";if(a(v)!="completed"){f(v,"incomplete")}var u=k()?"cmi.score.max":"cmi.core.score.max";f(u,this.MAX_SCORE.toString());var s=k()?"cmi.score.raw":"cmi.core.score.raw";this.BEST_SCORE=parseInt(a(s),10);if(isNaN(this.BEST_SCORE)){this.BEST_SCORE=0}r=new Date();i()},ExitLMS:function(){var v=new Date();var s=r||new Date();var w=v.getTime()-s.getTime();var t=k()?"cmi.session_time":"cmi.core.session_time";var u=k()?l(w/10):g(w);f(t,u);i();b()},UpdatePosition:function(x,z,u){var y=[];var w=null;for(var B=0;B<z.length;B++){var D=z[B];var t=D.TestData.passed?"1":"0";var F="";F="/"+D.TestData.score+"/"+t;y[B]=D.ID+"/"+z[B].VisitedPages.join("^")+F;if(!w){if(D.TestData.type!=LOUISE.Core.CBTItem.Testype.none&&!D.TestData.passed){w=D}}}var s=LOUISE.Core.CBTTree.CurrentFilter.join(",")+"|";var E=w?w.UID:x.UID;var C=s+E+","+y.join(",");f("cmi.suspend_data",C);var v=k()?"cmi.completion_status":"cmi.core.lesson_status";var A=k()?"cmi.success_status":"cmi.core.success_status";if(u<1&&a(v)!="completed"){f(v,"incomplete")}else{if(this.MAX_SCORE<1){f(v,"completed");setTimeout(o,1000);f(A,"passed")}else{f(v,"completed");setTimeout(o,1000)}}if(k()){f("cmi.progress_measure",u)}i()},Clear:function(){var t=q==c.SCORM_2004?"cmi.completion_status":"cmi.core.lesson_status";var s=q==c.SCORM_2004?"cmi.success_status":"cmi.core.success_status";f(t,"incomplete");f(s,"incomplete");f("cmi.suspend_data","empty");i()},GetLearnerName:function(){var s=k()?"cmi.learner_name":"cmi.core.student_name";return a(s)},GetLearnerRole:function(){return[]},AddScore:function(u,t,s){h[t.UID]=u},SetScore:function(){var t=n();var s=k()?"cmi.score.raw":"cmi.core.score.raw";f(s,t.toString());i()},SetCourseScore:function(v){var u=parseFloat(v);if(isNaN(u)&&v!="auto"){return}var s=k()?"cmi.score.raw":"cmi.core.score.raw";if(v=="auto"){u=n()}f(s,u.toString());var t=u/this.MAX_SCORE;if(isNaN(t)){t=0}if(k()){f("cmi.score.scaled",t)}i()},GetTotalScore:function(){return n()},GetCourseScore:function(){var s=k()?"cmi.score.raw":"cmi.core.score.raw";var t=parseInt(a(s),10);if(isNaN(t)){t=0}return t},SetMaxScore:function(u){var t=parseInt(u,10);if(isNaN(t)){return}this.MAX_SCORE=t;var s=k()?"cmi.score.max":"cmi.core.score.max";f(s,this.MAX_SCORE.toString())},GetMaxScore:function(){return this.MAX_SCORE},SetCoursePassesStatus:function(t){var s=k()?"cmi.success_status":"cmi.core.success_status";f(s,t.toString().toLowerCase());i()},GetCoursePassesStatus:function(){var s=k()?"cmi.success_status":"cmi.core.success_status";return a(s)}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Application=(function(){var j={iw:1,he:1,ar:1,fa:1};function f(l){var m=LOUISE.Application.File.Path.ToRoot(l);if(!LOUISE.Application.File.Exists(m)){return}var k=document.createElement("script");k.type="text/javascript";k.src=l;k.charset="utf-8";$("body").append(k)}function i(k){$("<link>").appendTo("head").attr({rel:"stylesheet",type:"text/css",href:k})}function a(){if(LOUISE.Skin.Styles){for(var k=0;k<LOUISE.Skin.Styles.length;k++){i("Skin/"+LOUISE.Skin.Styles[k])}}}function g(){if(LOUISE.Skin.Dependencies){for(var k=0;k<LOUISE.Skin.Dependencies.length;k++){f("Skin/"+LOUISE.Skin.Dependencies[k])}}}function c(){f("Skin/ini.js");if(typeof LOUISE.Skin=="undefined"){return}a();g();if(LOUISE.Skin.Init){LOUISE.Skin.Init()}}function b(){var l=LOUISE.Core.XML.LoadFile("info/CBTinfo.xml");var k=$("version",l);return k.first().text()}function h(){var m=LOUISE.Core.XML.LoadFile("info/CBTinfo.xml");var l=$("editor",m);var k=parseFloat(l.first().text());if(!isNaN(k)){return k}else{return 0.1}}function e(){var l=h();var k={primary:null,fallback:null};if(l<2.6){k.primary=LOUISE.Constants.TEXT_TYPE_MAPPING.VER_1;k.fallback=null}else{if(l<3){k.primary=LOUISE.Constants.TEXT_TYPE_MAPPING.VER_2_6;k.fallback=LOUISE.Constants.TEXT_TYPE_MAPPING.VER_1}else{k.primary=LOUISE.Constants.TEXT_TYPE_MAPPING.VER_3_0;k.fallback=LOUISE.Constants.TEXT_TYPE_MAPPING.VER_2_6}}return k}function d(){if(!LOUISE.Environment.MultiScreen||(LOUISE.Environment.MultiScreen&&!LOUISE.Environment.IsLectureScreen)){LOUISE.Core.CBTTree.SetFilter(LOUISE.Application.InitialFilter);var k=Math.random();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Core.CBTTree.SetFilter(['"+LOUISE.Application.InitialFilter.join("','")+"']);var check="+k+";}")}}return{SelectedLanguage:null,EditorVersion:0,TextTypeMapping:null,FallBackTextTypeMapping:null,SystemStrings:null,CourseStarted:false,IsRtl:false,DevMode:false,Loaded:false,InitialFilter:[],IsLoaded:function(){return this.Loaded},Pause:function(){this.CourseStarted=false},Resume:function(){this.CourseStarted=true},ShowLangMenu:function(){var l=LOUISE.Core.XML.LoadFile("info/languages.xml");var k=[];$("language",l).each(function(){k.push({longname:$(this).attr("long"),shortname:$(this).attr("short")})});if(k.length==1){LOUISE.Application.SelectedLanguage=k[0].shortname;LOUISE.Application.StartCourse();setTimeout(function(){var m=Math.random();LOUISE.NavigationProxy.AddMsg("function(){LOUISE.Application.SelectedLanguage='"+k[0].shortname+"';LOUISE.Application.StartCourse();var check="+m+";}")},1)}else{LOUISE.Layout.GUIMode.Set("language menu");LOUISE.UI.Render.Slide.LanguageMenu(k);LOUISE.UI.Preloader.Hide()}},InitCourse:function(){c();if(LOUISE.Environment.PrintMode&&LOUISE.UI.Print){LOUISE.UI.Print.Init()}LOUISE.NavigationProxy.ClearAllMsg();this.CBTVersion=b();this.EditorVersion=h();var l=e();this.TextTypeMapping=l.primary;this.FallBackTextTypeMapping=l.fallback;this.SystemStrings=LOUISE.Application.Strings.EN;$("#custom-slide-indicator").fadeTo(0,0);$("#search-results").hide();LOUISE.SCORM.StartLMS();var k=this;LOUISE.UI.Preloader.Show(function(){LOUISE.Layout.DefaultScreens();$("#navigation-toolbar").css("visibility","hidden");$("#module-thumb").css("visibility","hidden");if(LOUISE.Environment.EditorLanguage){setTimeout(function(){k.SelectedLanguage=LOUISE.Environment.EditorLanguage;k.StartCourse()},1)}else{if(!LOUISE.Environment.MultiScreen||(LOUISE.Environment.MultiScreen&&!LOUISE.Environment.IsLectureScreen)){$("#main-container").css("visibility","visible");k.ShowLangMenu()}}})},StartCourse:function(){var n=LOUISE.SelectedLanguage||"en";LOUISE.Application.IsRtl=j[n]==1;LOUISE.Core.Setup(LOUISE.Application.EditorVersion,LOUISE.Application.SelectedLanguage,LOUISE.Application.TextTypeMapping,LOUISE.Application.FallBackTextTypeMapping,LOUISE.Application.IsRtl);LOUISE.Core.AddEmptyLastModule=LOUISE.Constants.ADD_EMPTY_LASTMODULE;LOUISE.Application.SystemStrings=LOUISE.Application.Strings[n.toUpperCase()]||LOUISE.Application.Strings.EN;LOUISE.UI.ToolTipStrings.SetAllStrings();f("resources/js/Search/Indices/Index_"+n+".js");if(!LOUISE.Search.Index){$("#search-box").hide();$("#search-bar").height("1px")}var k=LOUISE.Environment.PrintCBT||"CBT_"+n;var m=LOUISE.Core.XML.LoadFile("CBTs/"+k+".xml");var l=LOUISE.Application;LOUISE.Core.XML.CBT.ParseTree(m,function(){$("#main-container").css("visibility","visible");$("#navigation-toolbar").css("visibility","visible");LOUISE.UI.Preloader.Show(function(){LOUISE.Layout.DefaultScreens();l.InitialFilter=l.InitialFilter.concat(LOUISE.SCORM.GetLearnerRole());l.InitialFilter=l.InitialFilter.concat(LOUISE.Environment.PrintFilters);d();$("#header-title").html(LOUISE.Core.CBTTree.CBTTitle);if(LOUISE.Environment.EditorStartPoint){LOUISE.Navigation.NavigateToNthModule(LOUISE.Environment.EditorStartPoint)}else{if(LOUISE.SCORM.ScormHistory.toLowerCase()!=""&&LOUISE.SCORM.ScormHistory.toLowerCase()!=="empty"){var t=LOUISE.SCORM.ScormHistory.indexOf("|");if(t!=-1){var p=LOUISE.SCORM.ScormHistory.substring(0,t);LOUISE.SCORM.ScormHistory=LOUISE.SCORM.ScormHistory.substring(t+1);LOUISE.Core.CBTTree.SetFilter(p.split(","))}var r=LOUISE.SCORM.ScormHistory.split(",");var q=r.shift();LOUISE.Navigation.HistoryFromScormdata(r);LOUISE.Navigation.NavigateToUID(q)}else{var o=0;var s=LOUISE.Core.CBTTree.Modules.GetAt(o);while(parseInt(s.GetProperty("hidden"),10)==1){o++;s=LOUISE.Core.CBTTree.Modules.GetAt(o)}LOUISE.Navigation.ToModule(s)}}l.CourseStarted=true})})},CloseCourse:function(){LOUISE.NavigationProxy.ClearAllMsg();window.close()},Trace:function(k){if(window.console!==undefined){console.log(k)}}}})();
LOUISE.Application.File=(function(){(function(){})();function b(c){var d=new XMLHttpRequest();d.open("HEAD",c,false);d.send();return d.status!=404}function a(e){try{var d=new ActiveXObject("Microsoft.XMLHTTP");d.open("HEAD",e,false);d.send();return true}catch(c){return false}}return{Path:{ToRoot:function(d){var f=window.location.href;var g=f.split("/");g=g.slice(0,g.length-1);var e=d.split("/");for(var c=0;c<e.length;c++){if(e[c]==".."){g=g=g.slice(0,g.length-1)}else{g.push(e[c])}}return g.join("/")}},Exists:function(c){if(c.indexOf("file:///")!=-1){return a(c)}return b(c)},LocalPath:function(c){var d=decodeURI(c).replace("file:///","");d=d.split("/").join("\\");return d},Write:function(c,h){var k;try{k=new ActiveXObject("Scripting.FileSystemObject")}catch(e){alert(e.message);throw new Error("Could not create file, This function is only supported in desktop mode");return}var g=c.substring(0,c.lastIndexOf("/"));if(!k.FolderExists(g)){k.CreateFolder(g)}var j=k.FileExists(c)?8:2;var f=k.OpenTextFile(c,j,true,-1);for(var d=0;d<h.length;d++){f.WriteLine(h[d])}f.Close()}}})();
if(LOUISE===null||LOUISE===undefined){var LOUISE={}}LOUISE.Search=(function(){var d=12;var b=false;var a=null;(function(){})();function e(o){var g=o;g=g.toLowerCase();var h=g.split(" ");var n=[];for(var m=0;m<h.length;m++){if(h[m]!=""){n.push(h[m])}}var k=[];for(var l=0;l<n.length;l++){k.push(c(n[l]))}if(k.length<1){return[]}var q=[].concat(k);q=f(k);var p=q.sort(function(j,i){return i[0]-j[0]});p=p.slice(0,d);return p}function f(g){var h={};var s=[];var n;var o;for(var l=0;l<g[0].length;l++){n=g[0][l].split(":");o=n[0]+":"+n[1];h[o]=parseInt(n[2],10)}for(var p=1;p<g.length;p++){for(match in h){var q=false;for(var m=0;m<g[p].length;m++){n=g[p][m].split(":");o=n[0]+":"+n[1];if(o==match&&h[match]!=null){h[match]+=parseInt(n[2],10);q=true;break}}if(!q){h[match]=null}}}for(list in h){if(h[list]>0){var r=new String(h[list]+":"+list).split(":");s.push(r)}}return s}function c(p){if(p.length<1){return[]}returnList=[];var q=[];var h=null;var n=LOUISE.Search.Index;for(var o=0;o<LOUISE.Search.Index.Keys.length;o++){if(n.Keys[o].indexOf(p)==0){h=n.wordIndex[n.Keys[o]];returnList=returnList.concat(h);q.push(n.Keys[o])}}if(p.length>1){for(var m=0;m<n.Keys.length;m++){if(n.Keys[m].match(p)){var g=false;for(var l=0;l<q.length;l++){if(q[l]==n.Keys[m]){g=true}}if(!g){h=n.wordIndex[n.Keys[m]];returnList=returnList.concat(h)}}}}return returnList}return{Index:null,BeginSearch:function(g,i){if(!this.Index){return}if(b){return}b=true;var h=i;setTimeout(function(){b=false;a=e(g);if(h){h(a)}},100)}}})();
window.onerror=function(c,b,a){if(LOUISE.Settings.SHOW_ERRORS){LOUISE.UI.EventHandlers.DisplayError(c+"\n"+b+"\n"+a)}return true};$(window).load(function(){$(window).resize(LOUISE.UI.EventHandlers.WindowResize);$(window).bind("beforeunload",LOUISE.UI.EventHandlers.EndScormSession);$(window).bind("unload",LOUISE.UI.EventHandlers.EndScormSession);$("html").click(LOUISE.UI.EventHandlers.HtmlClick);$("#module-thumb").load(LOUISE.UI.EventHandlers.ModuleThumbLoad);$("#module-thumb").error(LOUISE.UI.EventHandlers.ModuleThumbError);$("#search-box").focus(LOUISE.UI.EventHandlers.SearchBoxFocus);$("#search-box").click(function(a){a.stopPropagation()});$("#search-box").keyup(LOUISE.UI.EventHandlers.SearchBoxKeyUp);$("#nav-btn-prev").mouseenter(LOUISE.UI.EventHandlers.NavBtnMouseOver);$("#nav-btn-prev").mouseleave(LOUISE.UI.EventHandlers.NavBtnMouseOut);$("#nav-btn-prev").mousedown(LOUISE.UI.EventHandlers.NavBtnMouseDown);$("#nav-btn-prev").mouseup(LOUISE.UI.EventHandlers.NavBtnMouseUp);$("#nav-btn-prev").click(LOUISE.UI.EventHandlers.NavBtnClick);$("#nav-btn-next").mouseenter(LOUISE.UI.EventHandlers.NavBtnMouseOver);$("#nav-btn-next").mouseleave(LOUISE.UI.EventHandlers.NavBtnMouseOut);$("#nav-btn-next").mousedown(LOUISE.UI.EventHandlers.NavBtnMouseDown);$("#nav-btn-next").mouseup(LOUISE.UI.EventHandlers.NavBtnMouseUp);$("#nav-btn-next").click(LOUISE.UI.EventHandlers.NavBtnClick);$("#feedback-btn").mouseenter(LOUISE.UI.EventHandlers.NavBtnMouseOver);$("#feedback-btn").mouseleave(LOUISE.UI.EventHandlers.NavBtnMouseOut);$("#feedback-btn").mousedown(LOUISE.UI.EventHandlers.NavBtnMouseDown);$("#feedback-btn").mouseup(LOUISE.UI.EventHandlers.NavBtnMouseUp);$("#feedback-btn").click(LOUISE.UI.EventHandlers.FeedBackBtnClick);$("#close-button").click(LOUISE.UI.EventHandlers.CloseBtnClick);$("#close-button").mousedown(LOUISE.UI.EventHandlers.CloseMouseDown);$("#close-button").mouseup(LOUISE.UI.EventHandlers.CloseMouseUp);$("#close-button").mouseenter(LOUISE.UI.EventHandlers.CloseMouseOver);$("#close-button").mouseleave(LOUISE.UI.EventHandlers.CloseMouseOut);$("body").keyup(function(a){LOUISE.UI.EventHandlers.KeyNavigation(a)});$("body").keydown(function(a){LOUISE.UI.EventHandlers.KeyDown(a)});$("#penArea").mousemove(function(a){a.stopPropagation()});$("#penArea").mousedown(function(a){a.stopPropagation()});$("#pen-btn-toggle").mouseenter(function(){LOUISE.UI.EventHandlers.PenBtnMouseOver($(this))});$("#pen-btn-toggle").mouseleave(function(){LOUISE.UI.EventHandlers.PenBtnMouseOut($(this))});$("#pen-btn-toggle").mousedown(function(){LOUISE.UI.EventHandlers.PenBtnMouseDown($(this))});$("#pen-btn-toggle").mouseup(function(){LOUISE.UI.EventHandlers.PenBtnMouseUp($(this))});$("#pen-btn-toggle").click(function(){LOUISE.UI.EventHandlers.PenBtnClick($(this))});$("#pen-clear-btn").mouseenter(function(){LOUISE.UI.EventHandlers.PenEraseBtnMouseOver($(this))});$("#pen-clear-btn").mouseleave(function(){LOUISE.UI.EventHandlers.PenEraseBtnMouseOut($(this))});$("#pen-clear-btn").mousedown(function(){LOUISE.UI.EventHandlers.PenEraseBtnMouseDown($(this))});$("#pen-clear-btn").mouseup(function(){LOUISE.UI.EventHandlers.PenEraseBtnMouseUp($(this))});$("#pen-clear-btn").click(function(){LOUISE.UI.EventHandlers.PenEraseBtnClick($(this))});$("#menu-toggle-btn").mouseenter(function(){LOUISE.UI.EventHandlers.MenuToggleBtnMouseOver($(this))});$("#menu-toggle-btn").mouseleave(function(){LOUISE.UI.EventHandlers.MenuToggleBtnMouseOut($(this))});$("#menu-toggle-btn").mousedown(function(){LOUISE.UI.EventHandlers.MenuToggleBtnMouseDown($(this))});$("#menu-toggle-btn").mouseup(function(){LOUISE.UI.EventHandlers.MenuToggleBtnMouseUp($(this))});$("#menu-toggle-btn").click(function(){LOUISE.UI.EventHandlers.MenuToggleBtnClick($(this))});$("#trainer-txt-toggle-btn").mouseenter(function(){LOUISE.UI.EventHandlers.TrainerTxtToggleBtnMouseOver($(this))});$("#trainer-txt-toggle-btn").mouseleave(function(){LOUISE.UI.EventHandlers.TrainerTxtToggleBtnMouseOut($(this))});$("#trainer-txt-toggle-btn").mousedown(function(){LOUISE.UI.EventHandlers.TrainerTxtToggleBtnMouseDown($(this))});$("#trainer-txt-toggle-btn").mouseup(function(){LOUISE.UI.EventHandlers.TrainerTxtToggleBtnMouseUp($(this))});$("#trainer-txt-toggle-btn").click(function(){LOUISE.UI.EventHandlers.TrainerTxtToggleBtnClick($(this))});LOUISE.Core.Events.Add(LOUISE.Media.ON_MEDIA_LOADED,LOUISE.UI.EventHandlers.MediaLoaded);LOUISE.Core.Events.Add(LOUISE.Layout.TogglePanels.ON_NAV_MENU_TOGGLE,LOUISE.UI.EventHandlers.MenuToggled);LOUISE.Core.Events.Add(LOUISE.Layout.TogglePanels.ON_TRAINER_TEXT_TOGGLE,LOUISE.UI.EventHandlers.TrainerTxtToggled);LOUISE.Core.Events.Add(LOUISE.Navigation.ON_PAGE_CHANGED,LOUISE.UI.EventHandlers.PageChanged);LOUISE.Core.Events.Add(LOUISE.Navigation.ON_NAVIGATION_ERROR,LOUISE.UI.EventHandlers.NavigationError);LOUISE.Core.Events.Add(LOUISE.Navigation.ON_DRILLDOWN_CHANGED,LOUISE.UI.EventHandlers.DrilldownChanged);LOUISE.Core.Events.Add(LOUISE.Navigation.ON_MODULE_CHANGED,LOUISE.UI.EventHandlers.ModuleChanged);LOUISE.Core.Events.Add(LOUISE.Navigation.ON_TEXT_LINK_CLIKED,LOUISE.UI.EventHandlers.TextLinkClicked);LOUISE.Core.Events.Add(LOUISE.Core.CBTTree.ON_CBT_TREE_FILTERED,LOUISE.UI.EventHandlers.OnFiltered);LOUISE.UI.Preloader.SetPreloader($("#MediaPreloader"));LOUISE.Media.Pen.Create($("#penArea"));LOUISE.Application.InitCourse();if(LOUISE.Environment.MultiScreen){setInterval(LOUISE.NavigationProxy.SyncScreens,30)}});function IsLoaded(){return LOUISE.Application.IsLoaded()}function requestFocus(){LOUISE.Flash.Communication.requestFocus()}function releaseFocus(){LOUISE.UI.FocusNavigation()}function toggleFullscreen(a){LOUISE.Flash.Communication.toggleFullscreen(a,true)}function actionAfterVideo(a){LOUISE.Flash.Communication.Video.ActionAfterVideo(a)}function commandFromFlash(a){LOUISE.Flash.Communication.CommandFromFlash(a)}function getCBTLang(){return LOUISE.Flash.Communication.getCBTLang()}function navPrev(){LOUISE.Flash.Communication.navPrev()}function navNext(){LOUISE.Flash.Communication.navNext()}function navLabel(a){LOUISE.Flash.Communication.navLabel(a)}function setFilter(a){LOUISE.Navigation.ApplyFilter(a)}function getFilter(){return LOUISE.Core.CBTTree.CurrentFilter.join(",")}function getLearnerName(){return LOUISE.SCORM.GetLearnerName()||"Unknown user"}function setTestProgress(a){LOUISE.UI.Render.Progress.ProgressBarOverride("int",a,LOUISE.SCORM.MAX_SCORE)}function getScore(){return LOUISE.Navigation.CurrentModule.TestData.score}function getTotalScore(){return LOUISE.SCORM.GetTotalScore()}function setScore(a){LOUISE.Navigation.CurrentModule.TestData.score=a;LOUISE.SCORM.AddScore(a,Navigation.CurrentModule);LOUISE.Navigation.SetSCORMHistory()}function getPassingScore(){return LOUISE.SCORM.PASSING_SCORE}function setPassingScore(b){var a=parseFloat(b,10);if(isNaN(a)){return}LOUISE.SCORM.PASSING_SCORE=a}function getCourseScore(){return LOUISE.SCORM.GetCourseScore()}function setCourseScore(a){LOUISE.SCORM.SetCourseScore(a)}function getMaxScore(){return LOUISE.SCORM.GetMaxScore()}function setMaxScore(a){LOUISE.SCORM.SetMaxScore(a)}function getCoursePassesStatus(){return LOUISE.SCORM.GetCoursePassesStatus()}function setCoursePassesStatus(a){LOUISE.SCORM.SetCoursePassesStatus(a)}function getPassedStatus(){return LOUISE.Navigation.CurrentModule.TestData.passed}function setPassedStatus(b){var a=b.toString().toLowerCase()=="true";LOUISE.Navigation.CurrentModule.TestData.passed=a;LOUISE.Navigation.SetSCORMHistory()};
